---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: servicetemplates.k0rdent.mirantis.com
spec:
  group: k0rdent.mirantis.com
  names:
    kind: ServiceTemplate
    listKind: ServiceTemplateList
    plural: servicetemplates
    shortNames:
    - svctmpl
    singular: servicetemplate
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Valid
      jsonPath: .status.valid
      name: valid
      type: boolean
    - description: Validation Error
      jsonPath: .status.validationError
      name: validationError
      priority: 1
      type: string
    - description: Description
      jsonPath: .status.description
      name: description
      priority: 1
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ServiceTemplate is the Schema for the servicetemplates API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ServiceTemplateSpec defines the desired state of ServiceTemplate
            properties:
              helm:
                description: Helm contains the Helm chart information for the template.
                properties:
                  chartRef:
                    description: |-
                      ChartRef is a reference to a source controller resource containing the
                      Helm chart representing the template.
                    properties:
                      apiVersion:
                        description: APIVersion of the referent.
                        type: string
                      kind:
                        description: Kind of the referent.
                        enum:
                        - OCIRepository
                        - HelmChart
                        type: string
                      name:
                        description: Name of the referent.
                        maxLength: 253
                        minLength: 1
                        type: string
                      namespace:
                        description: |-
                          Namespace of the referent, defaults to the namespace of the Kubernetes
                          resource object that contains the reference.
                        maxLength: 63
                        minLength: 1
                        type: string
                    required:
                    - kind
                    - name
                    type: object
                  chartSource:
                    description: ChartSource is a source of a Helm chart representing
                      the template.
                    properties:
                      deploymentType:
                        default: Remote
                        description: |-
                          DeploymentType is the type of the deployment. This field is ignored,
                          when ResourceSpec is used as part of Helm chart configuration.
                        enum:
                        - Local
                        - Remote
                        type: string
                      localSourceRef:
                        description: LocalSourceRef is the local source of the kustomize
                          manifest.
                        properties:
                          kind:
                            description: Kind is the kind of the local source.
                            enum:
                            - ConfigMap
                            - Secret
                            - GitRepository
                            - Bucket
                            - OCIRepository
                            type: string
                          name:
                            description: Name is the name of the local source.
                            type: string
                          namespace:
                            description: |-
                              Namespace is the namespace of the local source. Cross-namespace references
                              are only allowed when the Kind is one of [github.com/fluxcd/source-controller/api/v1.GitRepository],
                              [github.com/fluxcd/source-controller/api/v1.Bucket] or [github.com/fluxcd/source-controller/api/v1beta2.OCIRepository].
                              If the Kind is ConfigMap or Secret, the namespace will be ignored.
                            type: string
                        required:
                        - kind
                        - name
                        type: object
                      path:
                        description: Path to the directory containing the resource
                          manifest.
                        type: string
                      remoteSourceSpec:
                        description: RemoteSourceSpec is the remote source of the
                          kustomize manifest.
                        properties:
                          bucket:
                            description: Bucket is the definition of bucket source.
                            properties:
                              bucketName:
                                description: BucketName is the name of the object
                                  storage bucket.
                                type: string
                              certSecretRef:
                                description: |-
                                  CertSecretRef can be given the name of a Secret containing
                                  either or both of

                                  - a PEM-encoded client certificate (`tls.crt`) and private
                                  key (`tls.key`);
                                  - a PEM-encoded CA certificate (`ca.crt`)

                                  and whichever are supplied, will be used for connecting to the
                                  bucket. The client cert and key are useful if you are
                                  authenticating with a certificate; the CA cert is useful if
                                  you are using a self-signed server certificate. The Secret must
                                  be of type `Opaque` or `kubernetes.io/tls`.

                                  This field is only supported for the `generic` provider.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              endpoint:
                                description: Endpoint is the object storage address
                                  the BucketName is located at.
                                type: string
                              ignore:
                                description: |-
                                  Ignore overrides the set of excluded patterns in the .sourceignore format
                                  (which is the same as .gitignore). If not provided, a default will be used,
                                  consult the documentation for your version to find out what those are.
                                type: string
                              insecure:
                                description: Insecure allows connecting to a non-TLS
                                  HTTP Endpoint.
                                type: boolean
                              interval:
                                description: |-
                                  Interval at which the Bucket Endpoint is checked for updates.
                                  This interval is approximate and may be subject to jitter to ensure
                                  efficient use of resources.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                                type: string
                              prefix:
                                description: Prefix to use for server-side filtering
                                  of files in the Bucket.
                                type: string
                              provider:
                                default: generic
                                description: |-
                                  Provider of the object storage bucket.
                                  Defaults to 'generic', which expects an S3 (API) compatible object
                                  storage.
                                enum:
                                - generic
                                - aws
                                - gcp
                                - azure
                                type: string
                              proxySecretRef:
                                description: |-
                                  ProxySecretRef specifies the Secret containing the proxy configuration
                                  to use while communicating with the Bucket server.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              region:
                                description: Region of the Endpoint where the BucketName
                                  is located in.
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing authentication credentials
                                  for the Bucket.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              sts:
                                description: |-
                                  STS specifies the required configuration to use a Security Token
                                  Service for fetching temporary credentials to authenticate in a
                                  Bucket provider.

                                  This field is only supported for the `aws` and `generic` providers.
                                properties:
                                  certSecretRef:
                                    description: |-
                                      CertSecretRef can be given the name of a Secret containing
                                      either or both of

                                      - a PEM-encoded client certificate (`tls.crt`) and private
                                      key (`tls.key`);
                                      - a PEM-encoded CA certificate (`ca.crt`)

                                      and whichever are supplied, will be used for connecting to the
                                      STS endpoint. The client cert and key are useful if you are
                                      authenticating with a certificate; the CA cert is useful if
                                      you are using a self-signed server certificate. The Secret must
                                      be of type `Opaque` or `kubernetes.io/tls`.

                                      This field is only supported for the `ldap` provider.
                                    properties:
                                      name:
                                        description: Name of the referent.
                                        type: string
                                    required:
                                    - name
                                    type: object
                                  endpoint:
                                    description: |-
                                      Endpoint is the HTTP/S endpoint of the Security Token Service from
                                      where temporary credentials will be fetched.
                                    pattern: ^(http|https)://.*$
                                    type: string
                                  provider:
                                    description: Provider of the Security Token Service.
                                    enum:
                                    - aws
                                    - ldap
                                    type: string
                                  secretRef:
                                    description: |-
                                      SecretRef specifies the Secret containing authentication credentials
                                      for the STS endpoint. This Secret must contain the fields `username`
                                      and `password` and is supported only for the `ldap` provider.
                                    properties:
                                      name:
                                        description: Name of the referent.
                                        type: string
                                    required:
                                    - name
                                    type: object
                                required:
                                - endpoint
                                - provider
                                type: object
                              suspend:
                                description: |-
                                  Suspend tells the controller to suspend the reconciliation of this
                                  Bucket.
                                type: boolean
                              timeout:
                                default: 60s
                                description: Timeout for fetch operations, defaults
                                  to 60s.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                                type: string
                            required:
                            - bucketName
                            - endpoint
                            - interval
                            type: object
                            x-kubernetes-validations:
                            - message: STS configuration is only supported for the
                                'aws' and 'generic' Bucket providers
                              rule: self.provider == 'aws' || self.provider == 'generic'
                                || !has(self.sts)
                            - message: '''aws'' is the only supported STS provider
                                for the ''aws'' Bucket provider'
                              rule: self.provider != 'aws' || !has(self.sts) || self.sts.provider
                                == 'aws'
                            - message: '''ldap'' is the only supported STS provider
                                for the ''generic'' Bucket provider'
                              rule: self.provider != 'generic' || !has(self.sts) ||
                                self.sts.provider == 'ldap'
                            - message: spec.sts.secretRef is not required for the
                                'aws' STS provider
                              rule: '!has(self.sts) || self.sts.provider != ''aws''
                                || !has(self.sts.secretRef)'
                            - message: spec.sts.certSecretRef is not required for
                                the 'aws' STS provider
                              rule: '!has(self.sts) || self.sts.provider != ''aws''
                                || !has(self.sts.certSecretRef)'
                          git:
                            description: Git is the definition of git repository source.
                            properties:
                              ignore:
                                description: |-
                                  Ignore overrides the set of excluded patterns in the .sourceignore format
                                  (which is the same as .gitignore). If not provided, a default will be used,
                                  consult the documentation for your version to find out what those are.
                                type: string
                              include:
                                description: |-
                                  Include specifies a list of GitRepository resources which Artifacts
                                  should be included in the Artifact produced for this GitRepository.
                                items:
                                  description: |-
                                    GitRepositoryInclude specifies a local reference to a GitRepository which
                                    Artifact (sub-)contents must be included, and where they should be placed.
                                  properties:
                                    fromPath:
                                      description: |-
                                        FromPath specifies the path to copy contents from, defaults to the root
                                        of the Artifact.
                                      type: string
                                    repository:
                                      description: |-
                                        GitRepositoryRef specifies the GitRepository which Artifact contents
                                        must be included.
                                      properties:
                                        name:
                                          description: Name of the referent.
                                          type: string
                                      required:
                                      - name
                                      type: object
                                    toPath:
                                      description: |-
                                        ToPath specifies the path to copy contents to, defaults to the name of
                                        the GitRepositoryRef.
                                      type: string
                                  required:
                                  - repository
                                  type: object
                                type: array
                              interval:
                                description: |-
                                  Interval at which the GitRepository URL is checked for updates.
                                  This interval is approximate and may be subject to jitter to ensure
                                  efficient use of resources.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                                type: string
                              provider:
                                description: |-
                                  Provider used for authentication, can be 'azure', 'github', 'generic'.
                                  When not specified, defaults to 'generic'.
                                enum:
                                - generic
                                - azure
                                - github
                                type: string
                              proxySecretRef:
                                description: |-
                                  ProxySecretRef specifies the Secret containing the proxy configuration
                                  to use while communicating with the Git server.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              recurseSubmodules:
                                description: |-
                                  RecurseSubmodules enables the initialization of all submodules within
                                  the GitRepository as cloned from the URL, using their default settings.
                                type: boolean
                              ref:
                                description: |-
                                  Reference specifies the Git reference to resolve and monitor for
                                  changes, defaults to the 'master' branch.
                                properties:
                                  branch:
                                    description: Branch to check out, defaults to
                                      'master' if no other field is defined.
                                    type: string
                                  commit:
                                    description: |-
                                      Commit SHA to check out, takes precedence over all reference fields.

                                      This can be combined with Branch to shallow clone the branch, in which
                                      the commit is expected to exist.
                                    type: string
                                  name:
                                    description: |-
                                      Name of the reference to check out; takes precedence over Branch, Tag and SemVer.

                                      It must be a valid Git reference: https://git-scm.com/docs/git-check-ref-format#_description
                                      Examples: "refs/heads/main", "refs/tags/v0.1.0", "refs/pull/420/head", "refs/merge-requests/1/head"
                                    type: string
                                  semver:
                                    description: SemVer tag expression to check out,
                                      takes precedence over Tag.
                                    type: string
                                  tag:
                                    description: Tag to check out, takes precedence
                                      over Branch.
                                    type: string
                                type: object
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing authentication credentials for
                                  the GitRepository.
                                  For HTTPS repositories the Secret must contain 'username' and 'password'
                                  fields for basic auth or 'bearerToken' field for token auth.
                                  For SSH repositories the Secret must contain 'identity'
                                  and 'known_hosts' fields.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              sparseCheckout:
                                description: |-
                                  SparseCheckout specifies a list of directories to checkout when cloning
                                  the repository. If specified, only these directories are included in the
                                  Artifact produced for this GitRepository.
                                items:
                                  type: string
                                type: array
                              suspend:
                                description: |-
                                  Suspend tells the controller to suspend the reconciliation of this
                                  GitRepository.
                                type: boolean
                              timeout:
                                default: 60s
                                description: Timeout for Git operations like cloning,
                                  defaults to 60s.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                                type: string
                              url:
                                description: URL specifies the Git repository URL,
                                  it can be an HTTP/S or SSH address.
                                pattern: ^(http|https|ssh)://.*$
                                type: string
                              verify:
                                description: |-
                                  Verification specifies the configuration to verify the Git commit
                                  signature(s).
                                properties:
                                  mode:
                                    default: HEAD
                                    description: |-
                                      Mode specifies which Git object(s) should be verified.

                                      The variants "head" and "HEAD" both imply the same thing, i.e. verify
                                      the commit that the HEAD of the Git repository points to. The variant
                                      "head" solely exists to ensure backwards compatibility.
                                    enum:
                                    - head
                                    - HEAD
                                    - Tag
                                    - TagAndHEAD
                                    type: string
                                  secretRef:
                                    description: |-
                                      SecretRef specifies the Secret containing the public keys of trusted Git
                                      authors.
                                    properties:
                                      name:
                                        description: Name of the referent.
                                        type: string
                                    required:
                                    - name
                                    type: object
                                required:
                                - secretRef
                                type: object
                            required:
                            - interval
                            - url
                            type: object
                          oci:
                            description: OCI is the definition of OCI repository source.
                            properties:
                              certSecretRef:
                                description: |-
                                  CertSecretRef can be given the name of a Secret containing
                                  either or both of

                                  - a PEM-encoded client certificate (`tls.crt`) and private
                                  key (`tls.key`);
                                  - a PEM-encoded CA certificate (`ca.crt`)

                                  and whichever are supplied, will be used for connecting to the
                                  registry. The client cert and key are useful if you are
                                  authenticating with a certificate; the CA cert is useful if
                                  you are using a self-signed server certificate. The Secret must
                                  be of type `Opaque` or `kubernetes.io/tls`.

                                  Note: Support for the `caFile`, `certFile` and `keyFile` keys have
                                  been deprecated.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              ignore:
                                description: |-
                                  Ignore overrides the set of excluded patterns in the .sourceignore format
                                  (which is the same as .gitignore). If not provided, a default will be used,
                                  consult the documentation for your version to find out what those are.
                                type: string
                              insecure:
                                description: Insecure allows connecting to a non-TLS
                                  HTTP container registry.
                                type: boolean
                              interval:
                                description: |-
                                  Interval at which the OCIRepository URL is checked for updates.
                                  This interval is approximate and may be subject to jitter to ensure
                                  efficient use of resources.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                                type: string
                              layerSelector:
                                description: |-
                                  LayerSelector specifies which layer should be extracted from the OCI artifact.
                                  When not specified, the first layer found in the artifact is selected.
                                properties:
                                  mediaType:
                                    description: |-
                                      MediaType specifies the OCI media type of the layer
                                      which should be extracted from the OCI Artifact. The
                                      first layer matching this type is selected.
                                    type: string
                                  operation:
                                    description: |-
                                      Operation specifies how the selected layer should be processed.
                                      By default, the layer compressed content is extracted to storage.
                                      When the operation is set to 'copy', the layer compressed content
                                      is persisted to storage as it is.
                                    enum:
                                    - extract
                                    - copy
                                    type: string
                                type: object
                              provider:
                                default: generic
                                description: |-
                                  The provider used for authentication, can be 'aws', 'azure', 'gcp' or 'generic'.
                                  When not specified, defaults to 'generic'.
                                enum:
                                - generic
                                - aws
                                - azure
                                - gcp
                                type: string
                              proxySecretRef:
                                description: |-
                                  ProxySecretRef specifies the Secret containing the proxy configuration
                                  to use while communicating with the container registry.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              ref:
                                description: |-
                                  The OCI reference to pull and monitor for changes,
                                  defaults to the latest tag.
                                properties:
                                  digest:
                                    description: |-
                                      Digest is the image digest to pull, takes precedence over SemVer.
                                      The value should be in the format 'sha256:<HASH>'.
                                    type: string
                                  semver:
                                    description: |-
                                      SemVer is the range of tags to pull selecting the latest within
                                      the range, takes precedence over Tag.
                                    type: string
                                  semverFilter:
                                    description: SemverFilter is a regex pattern to
                                      filter the tags within the SemVer range.
                                    type: string
                                  tag:
                                    description: Tag is the image tag to pull, defaults
                                      to latest.
                                    type: string
                                type: object
                              secretRef:
                                description: |-
                                  SecretRef contains the secret name containing the registry login
                                  credentials to resolve image metadata.
                                  The secret must be of type kubernetes.io/dockerconfigjson.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              serviceAccountName:
                                description: |-
                                  ServiceAccountName is the name of the Kubernetes ServiceAccount used to authenticate
                                  the image pull if the service account has attached pull secrets. For more information:
                                  https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#add-imagepullsecrets-to-a-service-account
                                type: string
                              suspend:
                                description: This flag tells the controller to suspend
                                  the reconciliation of this source.
                                type: boolean
                              timeout:
                                default: 60s
                                description: The timeout for remote OCI Repository
                                  operations like pulling, defaults to 60s.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                                type: string
                              url:
                                description: |-
                                  URL is a reference to an OCI artifact repository hosted
                                  on a remote container registry.
                                pattern: ^oci://.*$
                                type: string
                              verify:
                                description: |-
                                  Verify contains the secret name containing the trusted public keys
                                  used to verify the signature and specifies which provider to use to check
                                  whether OCI image is authentic.
                                properties:
                                  matchOIDCIdentity:
                                    description: |-
                                      MatchOIDCIdentity specifies the identity matching criteria to use
                                      while verifying an OCI artifact which was signed using Cosign keyless
                                      signing. The artifact's identity is deemed to be verified if any of the
                                      specified matchers match against the identity.
                                    items:
                                      description: |-
                                        OIDCIdentityMatch specifies options for verifying the certificate identity,
                                        i.e. the issuer and the subject of the certificate.
                                      properties:
                                        issuer:
                                          description: |-
                                            Issuer specifies the regex pattern to match against to verify
                                            the OIDC issuer in the Fulcio certificate. The pattern must be a
                                            valid Go regular expression.
                                          type: string
                                        subject:
                                          description: |-
                                            Subject specifies the regex pattern to match against to verify
                                            the identity subject in the Fulcio certificate. The pattern must
                                            be a valid Go regular expression.
                                          type: string
                                      required:
                                      - issuer
                                      - subject
                                      type: object
                                    type: array
                                  provider:
                                    default: cosign
                                    description: Provider specifies the technology
                                      used to sign the OCI Artifact.
                                    enum:
                                    - cosign
                                    - notation
                                    type: string
                                  secretRef:
                                    description: |-
                                      SecretRef specifies the Kubernetes Secret containing the
                                      trusted public keys.
                                    properties:
                                      name:
                                        description: Name of the referent.
                                        type: string
                                    required:
                                    - name
                                    type: object
                                required:
                                - provider
                                type: object
                            required:
                            - interval
                            - url
                            type: object
                        type: object
                        x-kubernetes-validations:
                        - message: Git, Bucket and OCI are mutually exclusive.
                          rule: 'has(self.git) ? (!has(self.bucket) && !has(self.oci))
                            : true'
                        - message: Git, Bucket and OCI are mutually exclusive.
                          rule: 'has(self.bucket) ? (!has(self.git) && !has(self.oci))
                            : true'
                        - message: Git, Bucket and OCI are mutually exclusive.
                          rule: 'has(self.oci) ? (!has(self.git) && !has(self.bucket))
                            : true'
                        - message: One of Git, Bucket or OCI must be specified.
                          rule: has(self.git) || has(self.bucket) || has(self.oci)
                    required:
                    - deploymentType
                    - path
                    type: object
                    x-kubernetes-validations:
                    - message: Secret and ConfigMap are not supported as Helm chart
                        sources
                      rule: 'has(self.localSourceRef) ? (self.localSourceRef.kind
                        != ''Secret'' && self.localSourceRef.kind != ''ConfigMap''):
                        true'
                    - message: LocalSource and RemoteSource are mutually exclusive.
                      rule: 'has(self.localSourceRef) ? !has(self.remoteSourceSpec):
                        true'
                    - message: LocalSource and RemoteSource are mutually exclusive.
                      rule: 'has(self.remoteSourceSpec) ? !has(self.localSourceRef):
                        true'
                    - message: One of LocalSource or RemoteSource must be specified.
                      rule: has(self.localSourceRef) || has(self.remoteSourceSpec)
                  chartSpec:
                    description: ChartSpec defines the desired state of the HelmChart
                      to be created by the controller
                    properties:
                      chart:
                        description: |-
                          Chart is the name or path the Helm chart is available at in the
                          SourceRef.
                        type: string
                      ignoreMissingValuesFiles:
                        description: |-
                          IgnoreMissingValuesFiles controls whether to silently ignore missing values
                          files rather than failing.
                        type: boolean
                      interval:
                        description: |-
                          Interval at which the HelmChart SourceRef is checked for updates.
                          This interval is approximate and may be subject to jitter to ensure
                          efficient use of resources.
                        pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                        type: string
                      reconcileStrategy:
                        default: ChartVersion
                        description: |-
                          ReconcileStrategy determines what enables the creation of a new artifact.
                          Valid values are ('ChartVersion', 'Revision').
                          See the documentation of the values for an explanation on their behavior.
                          Defaults to ChartVersion when omitted.
                        enum:
                        - ChartVersion
                        - Revision
                        type: string
                      sourceRef:
                        description: SourceRef is the reference to the Source the
                          chart is available at.
                        properties:
                          apiVersion:
                            description: APIVersion of the referent.
                            type: string
                          kind:
                            description: |-
                              Kind of the referent, valid values are ('HelmRepository', 'GitRepository',
                              'Bucket').
                            enum:
                            - HelmRepository
                            - GitRepository
                            - Bucket
                            type: string
                          name:
                            description: Name of the referent.
                            type: string
                        required:
                        - kind
                        - name
                        type: object
                      suspend:
                        description: |-
                          Suspend tells the controller to suspend the reconciliation of this
                          source.
                        type: boolean
                      valuesFiles:
                        description: |-
                          ValuesFiles is an alternative list of values files to use as the chart
                          values (values.yaml is not included by default), expected to be a
                          relative path in the SourceRef.
                          Values files are merged in the order of this list with the last file
                          overriding the first. Ignored when omitted.
                        items:
                          type: string
                        type: array
                      verify:
                        description: |-
                          Verify contains the secret name containing the trusted public keys
                          used to verify the signature and specifies which provider to use to check
                          whether OCI image is authentic.
                          This field is only supported when using HelmRepository source with spec.type 'oci'.
                          Chart dependencies, which are not bundled in the umbrella chart artifact, are not verified.
                        properties:
                          matchOIDCIdentity:
                            description: |-
                              MatchOIDCIdentity specifies the identity matching criteria to use
                              while verifying an OCI artifact which was signed using Cosign keyless
                              signing. The artifact's identity is deemed to be verified if any of the
                              specified matchers match against the identity.
                            items:
                              description: |-
                                OIDCIdentityMatch specifies options for verifying the certificate identity,
                                i.e. the issuer and the subject of the certificate.
                              properties:
                                issuer:
                                  description: |-
                                    Issuer specifies the regex pattern to match against to verify
                                    the OIDC issuer in the Fulcio certificate. The pattern must be a
                                    valid Go regular expression.
                                  type: string
                                subject:
                                  description: |-
                                    Subject specifies the regex pattern to match against to verify
                                    the identity subject in the Fulcio certificate. The pattern must
                                    be a valid Go regular expression.
                                  type: string
                              required:
                              - issuer
                              - subject
                              type: object
                            type: array
                          provider:
                            default: cosign
                            description: Provider specifies the technology used to
                              sign the OCI Artifact.
                            enum:
                            - cosign
                            - notation
                            type: string
                          secretRef:
                            description: |-
                              SecretRef specifies the Kubernetes Secret containing the
                              trusted public keys.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - provider
                        type: object
                      version:
                        default: '*'
                        description: |-
                          Version is the chart version semver expression, ignored for charts from
                          GitRepository and Bucket sources. Defaults to latest when omitted.
                        type: string
                    required:
                    - chart
                    - interval
                    - sourceRef
                    type: object
                type: object
                x-kubernetes-validations:
                - message: chartSpec, chartSource and chartRef are mutually exclusive
                  rule: '(has(self.chartSpec) ? (!has(self.chartSource) && !has(self.chartRef)):
                    true)'
                - message: chartSpec, chartSource and chartRef are mutually exclusive
                  rule: '(has(self.chartSource) ? (!has(self.chartSpec) && !has(self.chartRef)):
                    true)'
                - message: chartSpec, chartSource and chartRef are mutually exclusive
                  rule: '(has(self.chartRef) ? (!has(self.chartSpec) && !has(self.chartSource)):
                    true)'
                - message: one of chartSpec, chartRef or chartSource must be set
                  rule: has(self.chartSpec) || has(self.chartRef) || has(self.chartSource)
              k8sConstraint:
                description: Constraint describing compatible K8S versions of the
                  cluster set in the SemVer format.
                type: string
              kustomize:
                description: Kustomize contains the Kustomize configuration for the
                  template.
                properties:
                  deploymentType:
                    default: Remote
                    description: |-
                      DeploymentType is the type of the deployment. This field is ignored,
                      when ResourceSpec is used as part of Helm chart configuration.
                    enum:
                    - Local
                    - Remote
                    type: string
                  localSourceRef:
                    description: LocalSourceRef is the local source of the kustomize
                      manifest.
                    properties:
                      kind:
                        description: Kind is the kind of the local source.
                        enum:
                        - ConfigMap
                        - Secret
                        - GitRepository
                        - Bucket
                        - OCIRepository
                        type: string
                      name:
                        description: Name is the name of the local source.
                        type: string
                      namespace:
                        description: |-
                          Namespace is the namespace of the local source. Cross-namespace references
                          are only allowed when the Kind is one of [github.com/fluxcd/source-controller/api/v1.GitRepository],
                          [github.com/fluxcd/source-controller/api/v1.Bucket] or [github.com/fluxcd/source-controller/api/v1beta2.OCIRepository].
                          If the Kind is ConfigMap or Secret, the namespace will be ignored.
                        type: string
                    required:
                    - kind
                    - name
                    type: object
                  path:
                    description: Path to the directory containing the resource manifest.
                    type: string
                  remoteSourceSpec:
                    description: RemoteSourceSpec is the remote source of the kustomize
                      manifest.
                    properties:
                      bucket:
                        description: Bucket is the definition of bucket source.
                        properties:
                          bucketName:
                            description: BucketName is the name of the object storage
                              bucket.
                            type: string
                          certSecretRef:
                            description: |-
                              CertSecretRef can be given the name of a Secret containing
                              either or both of

                              - a PEM-encoded client certificate (`tls.crt`) and private
                              key (`tls.key`);
                              - a PEM-encoded CA certificate (`ca.crt`)

                              and whichever are supplied, will be used for connecting to the
                              bucket. The client cert and key are useful if you are
                              authenticating with a certificate; the CA cert is useful if
                              you are using a self-signed server certificate. The Secret must
                              be of type `Opaque` or `kubernetes.io/tls`.

                              This field is only supported for the `generic` provider.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          endpoint:
                            description: Endpoint is the object storage address the
                              BucketName is located at.
                            type: string
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          insecure:
                            description: Insecure allows connecting to a non-TLS HTTP
                              Endpoint.
                            type: boolean
                          interval:
                            description: |-
                              Interval at which the Bucket Endpoint is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          prefix:
                            description: Prefix to use for server-side filtering of
                              files in the Bucket.
                            type: string
                          provider:
                            default: generic
                            description: |-
                              Provider of the object storage bucket.
                              Defaults to 'generic', which expects an S3 (API) compatible object
                              storage.
                            enum:
                            - generic
                            - aws
                            - gcp
                            - azure
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the Bucket server.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          region:
                            description: Region of the Endpoint where the BucketName
                              is located in.
                            type: string
                          secretRef:
                            description: |-
                              SecretRef specifies the Secret containing authentication credentials
                              for the Bucket.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          sts:
                            description: |-
                              STS specifies the required configuration to use a Security Token
                              Service for fetching temporary credentials to authenticate in a
                              Bucket provider.

                              This field is only supported for the `aws` and `generic` providers.
                            properties:
                              certSecretRef:
                                description: |-
                                  CertSecretRef can be given the name of a Secret containing
                                  either or both of

                                  - a PEM-encoded client certificate (`tls.crt`) and private
                                  key (`tls.key`);
                                  - a PEM-encoded CA certificate (`ca.crt`)

                                  and whichever are supplied, will be used for connecting to the
                                  STS endpoint. The client cert and key are useful if you are
                                  authenticating with a certificate; the CA cert is useful if
                                  you are using a self-signed server certificate. The Secret must
                                  be of type `Opaque` or `kubernetes.io/tls`.

                                  This field is only supported for the `ldap` provider.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              endpoint:
                                description: |-
                                  Endpoint is the HTTP/S endpoint of the Security Token Service from
                                  where temporary credentials will be fetched.
                                pattern: ^(http|https)://.*$
                                type: string
                              provider:
                                description: Provider of the Security Token Service.
                                enum:
                                - aws
                                - ldap
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing authentication credentials
                                  for the STS endpoint. This Secret must contain the fields `username`
                                  and `password` and is supported only for the `ldap` provider.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - endpoint
                            - provider
                            type: object
                          suspend:
                            description: |-
                              Suspend tells the controller to suspend the reconciliation of this
                              Bucket.
                            type: boolean
                          timeout:
                            default: 60s
                            description: Timeout for fetch operations, defaults to
                              60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                        required:
                        - bucketName
                        - endpoint
                        - interval
                        type: object
                        x-kubernetes-validations:
                        - message: STS configuration is only supported for the 'aws'
                            and 'generic' Bucket providers
                          rule: self.provider == 'aws' || self.provider == 'generic'
                            || !has(self.sts)
                        - message: '''aws'' is the only supported STS provider for
                            the ''aws'' Bucket provider'
                          rule: self.provider != 'aws' || !has(self.sts) || self.sts.provider
                            == 'aws'
                        - message: '''ldap'' is the only supported STS provider for
                            the ''generic'' Bucket provider'
                          rule: self.provider != 'generic' || !has(self.sts) || self.sts.provider
                            == 'ldap'
                        - message: spec.sts.secretRef is not required for the 'aws'
                            STS provider
                          rule: '!has(self.sts) || self.sts.provider != ''aws'' ||
                            !has(self.sts.secretRef)'
                        - message: spec.sts.certSecretRef is not required for the
                            'aws' STS provider
                          rule: '!has(self.sts) || self.sts.provider != ''aws'' ||
                            !has(self.sts.certSecretRef)'
                      git:
                        description: Git is the definition of git repository source.
                        properties:
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          include:
                            description: |-
                              Include specifies a list of GitRepository resources which Artifacts
                              should be included in the Artifact produced for this GitRepository.
                            items:
                              description: |-
                                GitRepositoryInclude specifies a local reference to a GitRepository which
                                Artifact (sub-)contents must be included, and where they should be placed.
                              properties:
                                fromPath:
                                  description: |-
                                    FromPath specifies the path to copy contents from, defaults to the root
                                    of the Artifact.
                                  type: string
                                repository:
                                  description: |-
                                    GitRepositoryRef specifies the GitRepository which Artifact contents
                                    must be included.
                                  properties:
                                    name:
                                      description: Name of the referent.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                toPath:
                                  description: |-
                                    ToPath specifies the path to copy contents to, defaults to the name of
                                    the GitRepositoryRef.
                                  type: string
                              required:
                              - repository
                              type: object
                            type: array
                          interval:
                            description: |-
                              Interval at which the GitRepository URL is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          provider:
                            description: |-
                              Provider used for authentication, can be 'azure', 'github', 'generic'.
                              When not specified, defaults to 'generic'.
                            enum:
                            - generic
                            - azure
                            - github
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the Git server.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          recurseSubmodules:
                            description: |-
                              RecurseSubmodules enables the initialization of all submodules within
                              the GitRepository as cloned from the URL, using their default settings.
                            type: boolean
                          ref:
                            description: |-
                              Reference specifies the Git reference to resolve and monitor for
                              changes, defaults to the 'master' branch.
                            properties:
                              branch:
                                description: Branch to check out, defaults to 'master'
                                  if no other field is defined.
                                type: string
                              commit:
                                description: |-
                                  Commit SHA to check out, takes precedence over all reference fields.

                                  This can be combined with Branch to shallow clone the branch, in which
                                  the commit is expected to exist.
                                type: string
                              name:
                                description: |-
                                  Name of the reference to check out; takes precedence over Branch, Tag and SemVer.

                                  It must be a valid Git reference: https://git-scm.com/docs/git-check-ref-format#_description
                                  Examples: "refs/heads/main", "refs/tags/v0.1.0", "refs/pull/420/head", "refs/merge-requests/1/head"
                                type: string
                              semver:
                                description: SemVer tag expression to check out, takes
                                  precedence over Tag.
                                type: string
                              tag:
                                description: Tag to check out, takes precedence over
                                  Branch.
                                type: string
                            type: object
                          secretRef:
                            description: |-
                              SecretRef specifies the Secret containing authentication credentials for
                              the GitRepository.
                              For HTTPS repositories the Secret must contain 'username' and 'password'
                              fields for basic auth or 'bearerToken' field for token auth.
                              For SSH repositories the Secret must contain 'identity'
                              and 'known_hosts' fields.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          sparseCheckout:
                            description: |-
                              SparseCheckout specifies a list of directories to checkout when cloning
                              the repository. If specified, only these directories are included in the
                              Artifact produced for this GitRepository.
                            items:
                              type: string
                            type: array
                          suspend:
                            description: |-
                              Suspend tells the controller to suspend the reconciliation of this
                              GitRepository.
                            type: boolean
                          timeout:
                            default: 60s
                            description: Timeout for Git operations like cloning,
                              defaults to 60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                          url:
                            description: URL specifies the Git repository URL, it
                              can be an HTTP/S or SSH address.
                            pattern: ^(http|https|ssh)://.*$
                            type: string
                          verify:
                            description: |-
                              Verification specifies the configuration to verify the Git commit
                              signature(s).
                            properties:
                              mode:
                                default: HEAD
                                description: |-
                                  Mode specifies which Git object(s) should be verified.

                                  The variants "head" and "HEAD" both imply the same thing, i.e. verify
                                  the commit that the HEAD of the Git repository points to. The variant
                                  "head" solely exists to ensure backwards compatibility.
                                enum:
                                - head
                                - HEAD
                                - Tag
                                - TagAndHEAD
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing the public keys of trusted Git
                                  authors.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - secretRef
                            type: object
                        required:
                        - interval
                        - url
                        type: object
                      oci:
                        description: OCI is the definition of OCI repository source.
                        properties:
                          certSecretRef:
                            description: |-
                              CertSecretRef can be given the name of a Secret containing
                              either or both of

                              - a PEM-encoded client certificate (`tls.crt`) and private
                              key (`tls.key`);
                              - a PEM-encoded CA certificate (`ca.crt`)

                              and whichever are supplied, will be used for connecting to the
                              registry. The client cert and key are useful if you are
                              authenticating with a certificate; the CA cert is useful if
                              you are using a self-signed server certificate. The Secret must
                              be of type `Opaque` or `kubernetes.io/tls`.

                              Note: Support for the `caFile`, `certFile` and `keyFile` keys have
                              been deprecated.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          insecure:
                            description: Insecure allows connecting to a non-TLS HTTP
                              container registry.
                            type: boolean
                          interval:
                            description: |-
                              Interval at which the OCIRepository URL is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          layerSelector:
                            description: |-
                              LayerSelector specifies which layer should be extracted from the OCI artifact.
                              When not specified, the first layer found in the artifact is selected.
                            properties:
                              mediaType:
                                description: |-
                                  MediaType specifies the OCI media type of the layer
                                  which should be extracted from the OCI Artifact. The
                                  first layer matching this type is selected.
                                type: string
                              operation:
                                description: |-
                                  Operation specifies how the selected layer should be processed.
                                  By default, the layer compressed content is extracted to storage.
                                  When the operation is set to 'copy', the layer compressed content
                                  is persisted to storage as it is.
                                enum:
                                - extract
                                - copy
                                type: string
                            type: object
                          provider:
                            default: generic
                            description: |-
                              The provider used for authentication, can be 'aws', 'azure', 'gcp' or 'generic'.
                              When not specified, defaults to 'generic'.
                            enum:
                            - generic
                            - aws
                            - azure
                            - gcp
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the container registry.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          ref:
                            description: |-
                              The OCI reference to pull and monitor for changes,
                              defaults to the latest tag.
                            properties:
                              digest:
                                description: |-
                                  Digest is the image digest to pull, takes precedence over SemVer.
                                  The value should be in the format 'sha256:<HASH>'.
                                type: string
                              semver:
                                description: |-
                                  SemVer is the range of tags to pull selecting the latest within
                                  the range, takes precedence over Tag.
                                type: string
                              semverFilter:
                                description: SemverFilter is a regex pattern to filter
                                  the tags within the SemVer range.
                                type: string
                              tag:
                                description: Tag is the image tag to pull, defaults
                                  to latest.
                                type: string
                            type: object
                          secretRef:
                            description: |-
                              SecretRef contains the secret name containing the registry login
                              credentials to resolve image metadata.
                              The secret must be of type kubernetes.io/dockerconfigjson.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          serviceAccountName:
                            description: |-
                              ServiceAccountName is the name of the Kubernetes ServiceAccount used to authenticate
                              the image pull if the service account has attached pull secrets. For more information:
                              https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#add-imagepullsecrets-to-a-service-account
                            type: string
                          suspend:
                            description: This flag tells the controller to suspend
                              the reconciliation of this source.
                            type: boolean
                          timeout:
                            default: 60s
                            description: The timeout for remote OCI Repository operations
                              like pulling, defaults to 60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                          url:
                            description: |-
                              URL is a reference to an OCI artifact repository hosted
                              on a remote container registry.
                            pattern: ^oci://.*$
                            type: string
                          verify:
                            description: |-
                              Verify contains the secret name containing the trusted public keys
                              used to verify the signature and specifies which provider to use to check
                              whether OCI image is authentic.
                            properties:
                              matchOIDCIdentity:
                                description: |-
                                  MatchOIDCIdentity specifies the identity matching criteria to use
                                  while verifying an OCI artifact which was signed using Cosign keyless
                                  signing. The artifact's identity is deemed to be verified if any of the
                                  specified matchers match against the identity.
                                items:
                                  description: |-
                                    OIDCIdentityMatch specifies options for verifying the certificate identity,
                                    i.e. the issuer and the subject of the certificate.
                                  properties:
                                    issuer:
                                      description: |-
                                        Issuer specifies the regex pattern to match against to verify
                                        the OIDC issuer in the Fulcio certificate. The pattern must be a
                                        valid Go regular expression.
                                      type: string
                                    subject:
                                      description: |-
                                        Subject specifies the regex pattern to match against to verify
                                        the identity subject in the Fulcio certificate. The pattern must
                                        be a valid Go regular expression.
                                      type: string
                                  required:
                                  - issuer
                                  - subject
                                  type: object
                                type: array
                              provider:
                                default: cosign
                                description: Provider specifies the technology used
                                  to sign the OCI Artifact.
                                enum:
                                - cosign
                                - notation
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Kubernetes Secret containing the
                                  trusted public keys.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - provider
                            type: object
                        required:
                        - interval
                        - url
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.git) ? (!has(self.bucket) && !has(self.oci))
                        : true'
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.bucket) ? (!has(self.git) && !has(self.oci))
                        : true'
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.oci) ? (!has(self.git) && !has(self.bucket))
                        : true'
                    - message: One of Git, Bucket or OCI must be specified.
                      rule: has(self.git) || has(self.bucket) || has(self.oci)
                required:
                - deploymentType
                - path
                type: object
                x-kubernetes-validations:
                - message: LocalSource and RemoteSource are mutually exclusive.
                  rule: 'has(self.localSourceRef) ? !has(self.remoteSourceSpec): true'
                - message: LocalSource and RemoteSource are mutually exclusive.
                  rule: 'has(self.remoteSourceSpec) ? !has(self.localSourceRef): true'
                - message: One of LocalSource or RemoteSource must be specified.
                  rule: has(self.localSourceRef) || has(self.remoteSourceSpec)
              resources:
                description: Resources contains the resource configuration for the
                  template.
                properties:
                  deploymentType:
                    default: Remote
                    description: |-
                      DeploymentType is the type of the deployment. This field is ignored,
                      when ResourceSpec is used as part of Helm chart configuration.
                    enum:
                    - Local
                    - Remote
                    type: string
                  localSourceRef:
                    description: LocalSourceRef is the local source of the kustomize
                      manifest.
                    properties:
                      kind:
                        description: Kind is the kind of the local source.
                        enum:
                        - ConfigMap
                        - Secret
                        - GitRepository
                        - Bucket
                        - OCIRepository
                        type: string
                      name:
                        description: Name is the name of the local source.
                        type: string
                      namespace:
                        description: |-
                          Namespace is the namespace of the local source. Cross-namespace references
                          are only allowed when the Kind is one of [github.com/fluxcd/source-controller/api/v1.GitRepository],
                          [github.com/fluxcd/source-controller/api/v1.Bucket] or [github.com/fluxcd/source-controller/api/v1beta2.OCIRepository].
                          If the Kind is ConfigMap or Secret, the namespace will be ignored.
                        type: string
                    required:
                    - kind
                    - name
                    type: object
                  path:
                    description: Path to the directory containing the resource manifest.
                    type: string
                  remoteSourceSpec:
                    description: RemoteSourceSpec is the remote source of the kustomize
                      manifest.
                    properties:
                      bucket:
                        description: Bucket is the definition of bucket source.
                        properties:
                          bucketName:
                            description: BucketName is the name of the object storage
                              bucket.
                            type: string
                          certSecretRef:
                            description: |-
                              CertSecretRef can be given the name of a Secret containing
                              either or both of

                              - a PEM-encoded client certificate (`tls.crt`) and private
                              key (`tls.key`);
                              - a PEM-encoded CA certificate (`ca.crt`)

                              and whichever are supplied, will be used for connecting to the
                              bucket. The client cert and key are useful if you are
                              authenticating with a certificate; the CA cert is useful if
                              you are using a self-signed server certificate. The Secret must
                              be of type `Opaque` or `kubernetes.io/tls`.

                              This field is only supported for the `generic` provider.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          endpoint:
                            description: Endpoint is the object storage address the
                              BucketName is located at.
                            type: string
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          insecure:
                            description: Insecure allows connecting to a non-TLS HTTP
                              Endpoint.
                            type: boolean
                          interval:
                            description: |-
                              Interval at which the Bucket Endpoint is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          prefix:
                            description: Prefix to use for server-side filtering of
                              files in the Bucket.
                            type: string
                          provider:
                            default: generic
                            description: |-
                              Provider of the object storage bucket.
                              Defaults to 'generic', which expects an S3 (API) compatible object
                              storage.
                            enum:
                            - generic
                            - aws
                            - gcp
                            - azure
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the Bucket server.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          region:
                            description: Region of the Endpoint where the BucketName
                              is located in.
                            type: string
                          secretRef:
                            description: |-
                              SecretRef specifies the Secret containing authentication credentials
                              for the Bucket.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          sts:
                            description: |-
                              STS specifies the required configuration to use a Security Token
                              Service for fetching temporary credentials to authenticate in a
                              Bucket provider.

                              This field is only supported for the `aws` and `generic` providers.
                            properties:
                              certSecretRef:
                                description: |-
                                  CertSecretRef can be given the name of a Secret containing
                                  either or both of

                                  - a PEM-encoded client certificate (`tls.crt`) and private
                                  key (`tls.key`);
                                  - a PEM-encoded CA certificate (`ca.crt`)

                                  and whichever are supplied, will be used for connecting to the
                                  STS endpoint. The client cert and key are useful if you are
                                  authenticating with a certificate; the CA cert is useful if
                                  you are using a self-signed server certificate. The Secret must
                                  be of type `Opaque` or `kubernetes.io/tls`.

                                  This field is only supported for the `ldap` provider.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              endpoint:
                                description: |-
                                  Endpoint is the HTTP/S endpoint of the Security Token Service from
                                  where temporary credentials will be fetched.
                                pattern: ^(http|https)://.*$
                                type: string
                              provider:
                                description: Provider of the Security Token Service.
                                enum:
                                - aws
                                - ldap
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing authentication credentials
                                  for the STS endpoint. This Secret must contain the fields `username`
                                  and `password` and is supported only for the `ldap` provider.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - endpoint
                            - provider
                            type: object
                          suspend:
                            description: |-
                              Suspend tells the controller to suspend the reconciliation of this
                              Bucket.
                            type: boolean
                          timeout:
                            default: 60s
                            description: Timeout for fetch operations, defaults to
                              60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                        required:
                        - bucketName
                        - endpoint
                        - interval
                        type: object
                        x-kubernetes-validations:
                        - message: STS configuration is only supported for the 'aws'
                            and 'generic' Bucket providers
                          rule: self.provider == 'aws' || self.provider == 'generic'
                            || !has(self.sts)
                        - message: '''aws'' is the only supported STS provider for
                            the ''aws'' Bucket provider'
                          rule: self.provider != 'aws' || !has(self.sts) || self.sts.provider
                            == 'aws'
                        - message: '''ldap'' is the only supported STS provider for
                            the ''generic'' Bucket provider'
                          rule: self.provider != 'generic' || !has(self.sts) || self.sts.provider
                            == 'ldap'
                        - message: spec.sts.secretRef is not required for the 'aws'
                            STS provider
                          rule: '!has(self.sts) || self.sts.provider != ''aws'' ||
                            !has(self.sts.secretRef)'
                        - message: spec.sts.certSecretRef is not required for the
                            'aws' STS provider
                          rule: '!has(self.sts) || self.sts.provider != ''aws'' ||
                            !has(self.sts.certSecretRef)'
                      git:
                        description: Git is the definition of git repository source.
                        properties:
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          include:
                            description: |-
                              Include specifies a list of GitRepository resources which Artifacts
                              should be included in the Artifact produced for this GitRepository.
                            items:
                              description: |-
                                GitRepositoryInclude specifies a local reference to a GitRepository which
                                Artifact (sub-)contents must be included, and where they should be placed.
                              properties:
                                fromPath:
                                  description: |-
                                    FromPath specifies the path to copy contents from, defaults to the root
                                    of the Artifact.
                                  type: string
                                repository:
                                  description: |-
                                    GitRepositoryRef specifies the GitRepository which Artifact contents
                                    must be included.
                                  properties:
                                    name:
                                      description: Name of the referent.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                toPath:
                                  description: |-
                                    ToPath specifies the path to copy contents to, defaults to the name of
                                    the GitRepositoryRef.
                                  type: string
                              required:
                              - repository
                              type: object
                            type: array
                          interval:
                            description: |-
                              Interval at which the GitRepository URL is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          provider:
                            description: |-
                              Provider used for authentication, can be 'azure', 'github', 'generic'.
                              When not specified, defaults to 'generic'.
                            enum:
                            - generic
                            - azure
                            - github
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the Git server.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          recurseSubmodules:
                            description: |-
                              RecurseSubmodules enables the initialization of all submodules within
                              the GitRepository as cloned from the URL, using their default settings.
                            type: boolean
                          ref:
                            description: |-
                              Reference specifies the Git reference to resolve and monitor for
                              changes, defaults to the 'master' branch.
                            properties:
                              branch:
                                description: Branch to check out, defaults to 'master'
                                  if no other field is defined.
                                type: string
                              commit:
                                description: |-
                                  Commit SHA to check out, takes precedence over all reference fields.

                                  This can be combined with Branch to shallow clone the branch, in which
                                  the commit is expected to exist.
                                type: string
                              name:
                                description: |-
                                  Name of the reference to check out; takes precedence over Branch, Tag and SemVer.

                                  It must be a valid Git reference: https://git-scm.com/docs/git-check-ref-format#_description
                                  Examples: "refs/heads/main", "refs/tags/v0.1.0", "refs/pull/420/head", "refs/merge-requests/1/head"
                                type: string
                              semver:
                                description: SemVer tag expression to check out, takes
                                  precedence over Tag.
                                type: string
                              tag:
                                description: Tag to check out, takes precedence over
                                  Branch.
                                type: string
                            type: object
                          secretRef:
                            description: |-
                              SecretRef specifies the Secret containing authentication credentials for
                              the GitRepository.
                              For HTTPS repositories the Secret must contain 'username' and 'password'
                              fields for basic auth or 'bearerToken' field for token auth.
                              For SSH repositories the Secret must contain 'identity'
                              and 'known_hosts' fields.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          sparseCheckout:
                            description: |-
                              SparseCheckout specifies a list of directories to checkout when cloning
                              the repository. If specified, only these directories are included in the
                              Artifact produced for this GitRepository.
                            items:
                              type: string
                            type: array
                          suspend:
                            description: |-
                              Suspend tells the controller to suspend the reconciliation of this
                              GitRepository.
                            type: boolean
                          timeout:
                            default: 60s
                            description: Timeout for Git operations like cloning,
                              defaults to 60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                          url:
                            description: URL specifies the Git repository URL, it
                              can be an HTTP/S or SSH address.
                            pattern: ^(http|https|ssh)://.*$
                            type: string
                          verify:
                            description: |-
                              Verification specifies the configuration to verify the Git commit
                              signature(s).
                            properties:
                              mode:
                                default: HEAD
                                description: |-
                                  Mode specifies which Git object(s) should be verified.

                                  The variants "head" and "HEAD" both imply the same thing, i.e. verify
                                  the commit that the HEAD of the Git repository points to. The variant
                                  "head" solely exists to ensure backwards compatibility.
                                enum:
                                - head
                                - HEAD
                                - Tag
                                - TagAndHEAD
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing the public keys of trusted Git
                                  authors.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - secretRef
                            type: object
                        required:
                        - interval
                        - url
                        type: object
                      oci:
                        description: OCI is the definition of OCI repository source.
                        properties:
                          certSecretRef:
                            description: |-
                              CertSecretRef can be given the name of a Secret containing
                              either or both of

                              - a PEM-encoded client certificate (`tls.crt`) and private
                              key (`tls.key`);
                              - a PEM-encoded CA certificate (`ca.crt`)

                              and whichever are supplied, will be used for connecting to the
                              registry. The client cert and key are useful if you are
                              authenticating with a certificate; the CA cert is useful if
                              you are using a self-signed server certificate. The Secret must
                              be of type `Opaque` or `kubernetes.io/tls`.

                              Note: Support for the `caFile`, `certFile` and `keyFile` keys have
                              been deprecated.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          insecure:
                            description: Insecure allows connecting to a non-TLS HTTP
                              container registry.
                            type: boolean
                          interval:
                            description: |-
                              Interval at which the OCIRepository URL is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          layerSelector:
                            description: |-
                              LayerSelector specifies which layer should be extracted from the OCI artifact.
                              When not specified, the first layer found in the artifact is selected.
                            properties:
                              mediaType:
                                description: |-
                                  MediaType specifies the OCI media type of the layer
                                  which should be extracted from the OCI Artifact. The
                                  first layer matching this type is selected.
                                type: string
                              operation:
                                description: |-
                                  Operation specifies how the selected layer should be processed.
                                  By default, the layer compressed content is extracted to storage.
                                  When the operation is set to 'copy', the layer compressed content
                                  is persisted to storage as it is.
                                enum:
                                - extract
                                - copy
                                type: string
                            type: object
                          provider:
                            default: generic
                            description: |-
                              The provider used for authentication, can be 'aws', 'azure', 'gcp' or 'generic'.
                              When not specified, defaults to 'generic'.
                            enum:
                            - generic
                            - aws
                            - azure
                            - gcp
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the container registry.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          ref:
                            description: |-
                              The OCI reference to pull and monitor for changes,
                              defaults to the latest tag.
                            properties:
                              digest:
                                description: |-
                                  Digest is the image digest to pull, takes precedence over SemVer.
                                  The value should be in the format 'sha256:<HASH>'.
                                type: string
                              semver:
                                description: |-
                                  SemVer is the range of tags to pull selecting the latest within
                                  the range, takes precedence over Tag.
                                type: string
                              semverFilter:
                                description: SemverFilter is a regex pattern to filter
                                  the tags within the SemVer range.
                                type: string
                              tag:
                                description: Tag is the image tag to pull, defaults
                                  to latest.
                                type: string
                            type: object
                          secretRef:
                            description: |-
                              SecretRef contains the secret name containing the registry login
                              credentials to resolve image metadata.
                              The secret must be of type kubernetes.io/dockerconfigjson.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          serviceAccountName:
                            description: |-
                              ServiceAccountName is the name of the Kubernetes ServiceAccount used to authenticate
                              the image pull if the service account has attached pull secrets. For more information:
                              https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#add-imagepullsecrets-to-a-service-account
                            type: string
                          suspend:
                            description: This flag tells the controller to suspend
                              the reconciliation of this source.
                            type: boolean
                          timeout:
                            default: 60s
                            description: The timeout for remote OCI Repository operations
                              like pulling, defaults to 60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                          url:
                            description: |-
                              URL is a reference to an OCI artifact repository hosted
                              on a remote container registry.
                            pattern: ^oci://.*$
                            type: string
                          verify:
                            description: |-
                              Verify contains the secret name containing the trusted public keys
                              used to verify the signature and specifies which provider to use to check
                              whether OCI image is authentic.
                            properties:
                              matchOIDCIdentity:
                                description: |-
                                  MatchOIDCIdentity specifies the identity matching criteria to use
                                  while verifying an OCI artifact which was signed using Cosign keyless
                                  signing. The artifact's identity is deemed to be verified if any of the
                                  specified matchers match against the identity.
                                items:
                                  description: |-
                                    OIDCIdentityMatch specifies options for verifying the certificate identity,
                                    i.e. the issuer and the subject of the certificate.
                                  properties:
                                    issuer:
                                      description: |-
                                        Issuer specifies the regex pattern to match against to verify
                                        the OIDC issuer in the Fulcio certificate. The pattern must be a
                                        valid Go regular expression.
                                      type: string
                                    subject:
                                      description: |-
                                        Subject specifies the regex pattern to match against to verify
                                        the identity subject in the Fulcio certificate. The pattern must
                                        be a valid Go regular expression.
                                      type: string
                                  required:
                                  - issuer
                                  - subject
                                  type: object
                                type: array
                              provider:
                                default: cosign
                                description: Provider specifies the technology used
                                  to sign the OCI Artifact.
                                enum:
                                - cosign
                                - notation
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Kubernetes Secret containing the
                                  trusted public keys.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - provider
                            type: object
                        required:
                        - interval
                        - url
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.git) ? (!has(self.bucket) && !has(self.oci))
                        : true'
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.bucket) ? (!has(self.git) && !has(self.oci))
                        : true'
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.oci) ? (!has(self.git) && !has(self.bucket))
                        : true'
                    - message: One of Git, Bucket or OCI must be specified.
                      rule: has(self.git) || has(self.bucket) || has(self.oci)
                required:
                - deploymentType
                - path
                type: object
                x-kubernetes-validations:
                - message: LocalSource and RemoteSource are mutually exclusive.
                  rule: 'has(self.localSourceRef) ? !has(self.remoteSourceSpec): true'
                - message: LocalSource and RemoteSource are mutually exclusive.
                  rule: 'has(self.remoteSourceSpec) ? !has(self.localSourceRef): true'
                - message: One of LocalSource or RemoteSource must be specified.
                  rule: has(self.localSourceRef) || has(self.remoteSourceSpec)
              version:
                description: Version is the semantic version of the application backed
                  by template.
                type: string
            type: object
            x-kubernetes-validations:
            - message: Spec is immutable
              rule: self == oldSelf
            - message: Helm, Kustomize and Resources are mutually exclusive.
              rule: 'has(self.helm) ? (!has(self.kustomize) && !has(self.resources)):
                true'
            - message: Helm, Kustomize and Resources are mutually exclusive.
              rule: 'has(self.kustomize) ? (!has(self.helm) && !has(self.resources)):
                true'
            - message: Helm, Kustomize and Resources are mutually exclusive.
              rule: 'has(self.resources) ? (!has(self.kustomize) && !has(self.helm)):
                true'
            - message: One of Helm, Kustomize, or Resources must be specified.
              rule: has(self.helm) || has(self.kustomize) || has(self.resources)
          status:
            description: ServiceTemplateStatus defines the observed state of ServiceTemplate
            properties:
              chartRef:
                description: |-
                  ChartRef is a reference to a source controller resource containing the
                  Helm chart representing the template.
                properties:
                  apiVersion:
                    description: APIVersion of the referent.
                    type: string
                  kind:
                    description: Kind of the referent.
                    enum:
                    - OCIRepository
                    - HelmChart
                    type: string
                  name:
                    description: Name of the referent.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: |-
                      Namespace of the referent, defaults to the namespace of the Kubernetes
                      resource object that contains the reference.
                    maxLength: 63
                    minLength: 1
                    type: string
                required:
                - kind
                - name
                type: object
              chartVersion:
                description: ChartVersion represents the version of the Helm Chart
                  associated with this template.
                type: string
              config:
                description: |-
                  Config demonstrates available parameters for template customization,
                  that can be used when creating ClusterDeployment objects.
                x-kubernetes-preserve-unknown-fields: true
              description:
                description: Description contains information about the template.
                type: string
              k8sConstraint:
                description: Constraint describing compatible K8S versions of the
                  cluster set in the SemVer format.
                type: string
              observedGeneration:
                description: ObservedGeneration is the last observed generation.
                format: int64
                type: integer
              sourceStatus:
                description: SourceStatus reflects the status of the source.
                properties:
                  artifact:
                    description: Artifact is the artifact that was generated from
                      the template source.
                    properties:
                      digest:
                        description: Digest is the digest of the file in the form
                          of '<algorithm>:<checksum>'.
                        pattern: ^[a-z0-9]+(?:[.+_-][a-z0-9]+)*:[a-zA-Z0-9=_-]+$
                        type: string
                      lastUpdateTime:
                        description: |-
                          LastUpdateTime is the timestamp corresponding to the last update of the
                          Artifact.
                        format: date-time
                        type: string
                      metadata:
                        additionalProperties:
                          type: string
                        description: Metadata holds upstream information such as OCI
                          annotations.
                        type: object
                      path:
                        description: |-
                          Path is the relative file path of the Artifact. It can be used to locate
                          the file in the root of the Artifact storage on the local file system of
                          the controller managing the Source.
                        type: string
                      revision:
                        description: |-
                          Revision is a human-readable identifier traceable in the origin source
                          system. It can be a Git commit SHA, Git tag, a Helm chart version, etc.
                        type: string
                      size:
                        description: Size is the number of bytes in the file.
                        format: int64
                        type: integer
                      url:
                        description: |-
                          URL is the HTTP address of the Artifact as exposed by the controller
                          managing the Source. It can be used to retrieve the Artifact for
                          consumption, e.g. by another controller applying the Artifact contents.
                        type: string
                    required:
                    - lastUpdateTime
                    - path
                    - revision
                    - url
                    type: object
                  conditions:
                    description: Conditions reflects the conditions of the remote
                      source object.
                    items:
                      description: Condition contains details for one aspect of the
                        current state of this API Resource.
                      properties:
                        lastTransitionTime:
                          description: |-
                            lastTransitionTime is the last time the condition transitioned from one status to another.
                            This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                          format: date-time
                          type: string
                        message:
                          description: |-
                            message is a human readable message indicating details about the transition.
                            This may be an empty string.
                          maxLength: 32768
                          type: string
                        observedGeneration:
                          description: |-
                            observedGeneration represents the .metadata.generation that the condition was set based upon.
                            For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                            with respect to the current state of the instance.
                          format: int64
                          minimum: 0
                          type: integer
                        reason:
                          description: |-
                            reason contains a programmatic identifier indicating the reason for the condition's last transition.
                            Producers of specific condition types may define expected values and meanings for this field,
                            and whether the values are considered a guaranteed API.
                            The value should be a CamelCase string.
                            This field may not be empty.
                          maxLength: 1024
                          minLength: 1
                          pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                          type: string
                        status:
                          description: status of the condition, one of True, False,
                            Unknown.
                          enum:
                          - "True"
                          - "False"
                          - Unknown
                          type: string
                        type:
                          description: type of condition in CamelCase or in foo.example.com/CamelCase.
                          maxLength: 316
                          pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                          type: string
                      required:
                      - lastTransitionTime
                      - message
                      - reason
                      - status
                      - type
                      type: object
                    type: array
                  kind:
                    description: Kind is the kind of the remote source.
                    type: string
                  name:
                    description: Name is the name of the remote source.
                    type: string
                  namespace:
                    description: Namespace is the namespace of the remote source.
                    type: string
                  observedGeneration:
                    description: ObservedGeneration is the latest source generation
                      observed by the controller.
                    format: int64
                    type: integer
                required:
                - kind
                - name
                - namespace
                type: object
              valid:
                description: Valid indicates whether the template passed validation
                  or not.
                type: boolean
              validationError:
                description: ValidationError provides information regarding issues
                  encountered during template validation.
                type: string
            required:
            - valid
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}
  - additionalPrinterColumns:
    - description: Valid
      jsonPath: .status.valid
      name: valid
      type: boolean
    - description: Validation Error
      jsonPath: .status.validationError
      name: validationError
      priority: 1
      type: string
    - description: Description
      jsonPath: .status.description
      name: description
      priority: 1
      type: string
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: ServiceTemplate is the Schema for the servicetemplates API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ServiceTemplateSpec defines the desired state of ServiceTemplate
            properties:
              helm:
                description: Helm contains the Helm chart information for the template.
                properties:
                  chartRef:
                    description: |-
                      ChartRef is a reference to a source controller resource containing the
                      Helm chart representing the template.
                    properties:
                      apiVersion:
                        description: APIVersion of the referent.
                        type: string
                      kind:
                        description: Kind of the referent.
                        enum:
                        - OCIRepository
                        - HelmChart
                        type: string
                      name:
                        description: Name of the referent.
                        maxLength: 253
                        minLength: 1
                        type: string
                      namespace:
                        description: |-
                          Namespace of the referent, defaults to the namespace of the Kubernetes
                          resource object that contains the reference.
                        maxLength: 63
                        minLength: 1
                        type: string
                    required:
                    - kind
                    - name
                    type: object
                  chartSource:
                    description: ChartSource is a source of a Helm chart representing
                      the template.
                    properties:
                      deploymentType:
                        default: Remote
                        description: |-
                          DeploymentType is the type of the deployment. This field is ignored,
                          when ResourceSpec is used as part of Helm chart configuration.
                        enum:
                        - Local
                        - Remote
                        type: string
                      localSourceRef:
                        description: LocalSourceRef is the local source of the kustomize
                          manifest.
                        properties:
                          kind:
                            description: Kind is the kind of the local source.
                            enum:
                            - ConfigMap
                            - Secret
                            - GitRepository
                            - Bucket
                            - OCIRepository
                            type: string
                          name:
                            description: Name is the name of the local source.
                            type: string
                          namespace:
                            description: |-
                              Namespace is the namespace of the local source. Cross-namespace references
                              are only allowed when the Kind is one of [github.com/fluxcd/source-controller/api/v1.GitRepository],
                              [github.com/fluxcd/source-controller/api/v1.Bucket] or [github.com/fluxcd/source-controller/api/v1.OCIRepository].
                              If the Kind is ConfigMap or Secret, the namespace will be ignored.
                            type: string
                        required:
                        - kind
                        - name
                        type: object
                      path:
                        description: Path to the directory containing the resource
                          manifest.
                        type: string
                      remoteSourceSpec:
                        description: RemoteSourceSpec is the remote source of the
                          kustomize manifest.
                        properties:
                          bucket:
                            description: Bucket is the definition of bucket source.
                            properties:
                              bucketName:
                                description: BucketName is the name of the object
                                  storage bucket.
                                type: string
                              certSecretRef:
                                description: |-
                                  CertSecretRef can be given the name of a Secret containing
                                  either or both of

                                  - a PEM-encoded client certificate (`tls.crt`) and private
                                  key (`tls.key`);
                                  - a PEM-encoded CA certificate (`ca.crt`)

                                  and whichever are supplied, will be used for connecting to the
                                  bucket. The client cert and key are useful if you are
                                  authenticating with a certificate; the CA cert is useful if
                                  you are using a self-signed server certificate. The Secret must
                                  be of type `Opaque` or `kubernetes.io/tls`.

                                  This field is only supported for the `generic` provider.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              endpoint:
                                description: Endpoint is the object storage address
                                  the BucketName is located at.
                                type: string
                              ignore:
                                description: |-
                                  Ignore overrides the set of excluded patterns in the .sourceignore format
                                  (which is the same as .gitignore). If not provided, a default will be used,
                                  consult the documentation for your version to find out what those are.
                                type: string
                              insecure:
                                description: Insecure allows connecting to a non-TLS
                                  HTTP Endpoint.
                                type: boolean
                              interval:
                                description: |-
                                  Interval at which the Bucket Endpoint is checked for updates.
                                  This interval is approximate and may be subject to jitter to ensure
                                  efficient use of resources.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                                type: string
                              prefix:
                                description: Prefix to use for server-side filtering
                                  of files in the Bucket.
                                type: string
                              provider:
                                default: generic
                                description: |-
                                  Provider of the object storage bucket.
                                  Defaults to 'generic', which expects an S3 (API) compatible object
                                  storage.
                                enum:
                                - generic
                                - aws
                                - gcp
                                - azure
                                type: string
                              proxySecretRef:
                                description: |-
                                  ProxySecretRef specifies the Secret containing the proxy configuration
                                  to use while communicating with the Bucket server.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              region:
                                description: Region of the Endpoint where the BucketName
                                  is located in.
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing authentication credentials
                                  for the Bucket.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              sts:
                                description: |-
                                  STS specifies the required configuration to use a Security Token
                                  Service for fetching temporary credentials to authenticate in a
                                  Bucket provider.

                                  This field is only supported for the `aws` and `generic` providers.
                                properties:
                                  certSecretRef:
                                    description: |-
                                      CertSecretRef can be given the name of a Secret containing
                                      either or both of

                                      - a PEM-encoded client certificate (`tls.crt`) and private
                                      key (`tls.key`);
                                      - a PEM-encoded CA certificate (`ca.crt`)

                                      and whichever are supplied, will be used for connecting to the
                                      STS endpoint. The client cert and key are useful if you are
                                      authenticating with a certificate; the CA cert is useful if
                                      you are using a self-signed server certificate. The Secret must
                                      be of type `Opaque` or `kubernetes.io/tls`.

                                      This field is only supported for the `ldap` provider.
                                    properties:
                                      name:
                                        description: Name of the referent.
                                        type: string
                                    required:
                                    - name
                                    type: object
                                  endpoint:
                                    description: |-
                                      Endpoint is the HTTP/S endpoint of the Security Token Service from
                                      where temporary credentials will be fetched.
                                    pattern: ^(http|https)://.*$
                                    type: string
                                  provider:
                                    description: Provider of the Security Token Service.
                                    enum:
                                    - aws
                                    - ldap
                                    type: string
                                  secretRef:
                                    description: |-
                                      SecretRef specifies the Secret containing authentication credentials
                                      for the STS endpoint. This Secret must contain the fields `username`
                                      and `password` and is supported only for the `ldap` provider.
                                    properties:
                                      name:
                                        description: Name of the referent.
                                        type: string
                                    required:
                                    - name
                                    type: object
                                required:
                                - endpoint
                                - provider
                                type: object
                              suspend:
                                description: |-
                                  Suspend tells the controller to suspend the reconciliation of this
                                  Bucket.
                                type: boolean
                              timeout:
                                default: 60s
                                description: Timeout for fetch operations, defaults
                                  to 60s.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                                type: string
                            required:
                            - bucketName
                            - endpoint
                            - interval
                            type: object
                            x-kubernetes-validations:
                            - message: STS configuration is only supported for the
                                'aws' and 'generic' Bucket providers
                              rule: self.provider == 'aws' || self.provider == 'generic'
                                || !has(self.sts)
                            - message: '''aws'' is the only supported STS provider
                                for the ''aws'' Bucket provider'
                              rule: self.provider != 'aws' || !has(self.sts) || self.sts.provider
                                == 'aws'
                            - message: '''ldap'' is the only supported STS provider
                                for the ''generic'' Bucket provider'
                              rule: self.provider != 'generic' || !has(self.sts) ||
                                self.sts.provider == 'ldap'
                            - message: spec.sts.secretRef is not required for the
                                'aws' STS provider
                              rule: '!has(self.sts) || self.sts.provider != ''aws''
                                || !has(self.sts.secretRef)'
                            - message: spec.sts.certSecretRef is not required for
                                the 'aws' STS provider
                              rule: '!has(self.sts) || self.sts.provider != ''aws''
                                || !has(self.sts.certSecretRef)'
                          git:
                            description: Git is the definition of git repository source.
                            properties:
                              ignore:
                                description: |-
                                  Ignore overrides the set of excluded patterns in the .sourceignore format
                                  (which is the same as .gitignore). If not provided, a default will be used,
                                  consult the documentation for your version to find out what those are.
                                type: string
                              include:
                                description: |-
                                  Include specifies a list of GitRepository resources which Artifacts
                                  should be included in the Artifact produced for this GitRepository.
                                items:
                                  description: |-
                                    GitRepositoryInclude specifies a local reference to a GitRepository which
                                    Artifact (sub-)contents must be included, and where they should be placed.
                                  properties:
                                    fromPath:
                                      description: |-
                                        FromPath specifies the path to copy contents from, defaults to the root
                                        of the Artifact.
                                      type: string
                                    repository:
                                      description: |-
                                        GitRepositoryRef specifies the GitRepository which Artifact contents
                                        must be included.
                                      properties:
                                        name:
                                          description: Name of the referent.
                                          type: string
                                      required:
                                      - name
                                      type: object
                                    toPath:
                                      description: |-
                                        ToPath specifies the path to copy contents to, defaults to the name of
                                        the GitRepositoryRef.
                                      type: string
                                  required:
                                  - repository
                                  type: object
                                type: array
                              interval:
                                description: |-
                                  Interval at which the GitRepository URL is checked for updates.
                                  This interval is approximate and may be subject to jitter to ensure
                                  efficient use of resources.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                                type: string
                              provider:
                                description: |-
                                  Provider used for authentication, can be 'azure', 'github', 'generic'.
                                  When not specified, defaults to 'generic'.
                                enum:
                                - generic
                                - azure
                                - github
                                type: string
                              proxySecretRef:
                                description: |-
                                  ProxySecretRef specifies the Secret containing the proxy configuration
                                  to use while communicating with the Git server.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              recurseSubmodules:
                                description: |-
                                  RecurseSubmodules enables the initialization of all submodules within
                                  the GitRepository as cloned from the URL, using their default settings.
                                type: boolean
                              ref:
                                description: |-
                                  Reference specifies the Git reference to resolve and monitor for
                                  changes, defaults to the 'master' branch.
                                properties:
                                  branch:
                                    description: Branch to check out, defaults to
                                      'master' if no other field is defined.
                                    type: string
                                  commit:
                                    description: |-
                                      Commit SHA to check out, takes precedence over all reference fields.

                                      This can be combined with Branch to shallow clone the branch, in which
                                      the commit is expected to exist.
                                    type: string
                                  name:
                                    description: |-
                                      Name of the reference to check out; takes precedence over Branch, Tag and SemVer.

                                      It must be a valid Git reference: https://git-scm.com/docs/git-check-ref-format#_description
                                      Examples: "refs/heads/main", "refs/tags/v0.1.0", "refs/pull/420/head", "refs/merge-requests/1/head"
                                    type: string
                                  semver:
                                    description: SemVer tag expression to check out,
                                      takes precedence over Tag.
                                    type: string
                                  tag:
                                    description: Tag to check out, takes precedence
                                      over Branch.
                                    type: string
                                type: object
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing authentication credentials for
                                  the GitRepository.
                                  For HTTPS repositories the Secret must contain 'username' and 'password'
                                  fields for basic auth or 'bearerToken' field for token auth.
                                  For SSH repositories the Secret must contain 'identity'
                                  and 'known_hosts' fields.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              sparseCheckout:
                                description: |-
                                  SparseCheckout specifies a list of directories to checkout when cloning
                                  the repository. If specified, only these directories are included in the
                                  Artifact produced for this GitRepository.
                                items:
                                  type: string
                                type: array
                              suspend:
                                description: |-
                                  Suspend tells the controller to suspend the reconciliation of this
                                  GitRepository.
                                type: boolean
                              timeout:
                                default: 60s
                                description: Timeout for Git operations like cloning,
                                  defaults to 60s.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                                type: string
                              url:
                                description: URL specifies the Git repository URL,
                                  it can be an HTTP/S or SSH address.
                                pattern: ^(http|https|ssh)://.*$
                                type: string
                              verify:
                                description: |-
                                  Verification specifies the configuration to verify the Git commit
                                  signature(s).
                                properties:
                                  mode:
                                    default: HEAD
                                    description: |-
                                      Mode specifies which Git object(s) should be verified.

                                      The variants "head" and "HEAD" both imply the same thing, i.e. verify
                                      the commit that the HEAD of the Git repository points to. The variant
                                      "head" solely exists to ensure backwards compatibility.
                                    enum:
                                    - head
                                    - HEAD
                                    - Tag
                                    - TagAndHEAD
                                    type: string
                                  secretRef:
                                    description: |-
                                      SecretRef specifies the Secret containing the public keys of trusted Git
                                      authors.
                                    properties:
                                      name:
                                        description: Name of the referent.
                                        type: string
                                    required:
                                    - name
                                    type: object
                                required:
                                - secretRef
                                type: object
                            required:
                            - interval
                            - url
                            type: object
                          oci:
                            description: OCI is the definition of OCI repository source.
                            properties:
                              certSecretRef:
                                description: |-
                                  CertSecretRef can be given the name of a Secret containing
                                  either or both of

                                  - a PEM-encoded client certificate (`tls.crt`) and private
                                  key (`tls.key`);
                                  - a PEM-encoded CA certificate (`ca.crt`)

                                  and whichever are supplied, will be used for connecting to the
                                  registry. The client cert and key are useful if you are
                                  authenticating with a certificate; the CA cert is useful if
                                  you are using a self-signed server certificate. The Secret must
                                  be of type `Opaque` or `kubernetes.io/tls`.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              ignore:
                                description: |-
                                  Ignore overrides the set of excluded patterns in the .sourceignore format
                                  (which is the same as .gitignore). If not provided, a default will be used,
                                  consult the documentation for your version to find out what those are.
                                type: string
                              insecure:
                                description: Insecure allows connecting to a non-TLS
                                  HTTP container registry.
                                type: boolean
                              interval:
                                description: |-
                                  Interval at which the OCIRepository URL is checked for updates.
                                  This interval is approximate and may be subject to jitter to ensure
                                  efficient use of resources.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                                type: string
                              layerSelector:
                                description: |-
                                  LayerSelector specifies which layer should be extracted from the OCI artifact.
                                  When not specified, the first layer found in the artifact is selected.
                                properties:
                                  mediaType:
                                    description: |-
                                      MediaType specifies the OCI media type of the layer
                                      which should be extracted from the OCI Artifact. The
                                      first layer matching this type is selected.
                                    type: string
                                  operation:
                                    description: |-
                                      Operation specifies how the selected layer should be processed.
                                      By default, the layer compressed content is extracted to storage.
                                      When the operation is set to 'copy', the layer compressed content
                                      is persisted to storage as it is.
                                    enum:
                                    - extract
                                    - copy
                                    type: string
                                type: object
                              provider:
                                default: generic
                                description: |-
                                  The provider used for authentication, can be 'aws', 'azure', 'gcp' or 'generic'.
                                  When not specified, defaults to 'generic'.
                                enum:
                                - generic
                                - aws
                                - azure
                                - gcp
                                type: string
                              proxySecretRef:
                                description: |-
                                  ProxySecretRef specifies the Secret containing the proxy configuration
                                  to use while communicating with the container registry.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              ref:
                                description: |-
                                  The OCI reference to pull and monitor for changes,
                                  defaults to the latest tag.
                                properties:
                                  digest:
                                    description: |-
                                      Digest is the image digest to pull, takes precedence over SemVer.
                                      The value should be in the format 'sha256:<HASH>'.
                                    type: string
                                  semver:
                                    description: |-
                                      SemVer is the range of tags to pull selecting the latest within
                                      the range, takes precedence over Tag.
                                    type: string
                                  semverFilter:
                                    description: SemverFilter is a regex pattern to
                                      filter the tags within the SemVer range.
                                    type: string
                                  tag:
                                    description: Tag is the image tag to pull, defaults
                                      to latest.
                                    type: string
                                type: object
                              secretRef:
                                description: |-
                                  SecretRef contains the secret name containing the registry login
                                  credentials to resolve image metadata.
                                  The secret must be of type kubernetes.io/dockerconfigjson.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              serviceAccountName:
                                description: |-
                                  ServiceAccountName is the name of the Kubernetes ServiceAccount used to authenticate
                                  the image pull if the service account has attached pull secrets. For more information:
                                  https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#add-imagepullsecrets-to-a-service-account
                                type: string
                              suspend:
                                description: This flag tells the controller to suspend
                                  the reconciliation of this source.
                                type: boolean
                              timeout:
                                default: 60s
                                description: The timeout for remote OCI Repository
                                  operations like pulling, defaults to 60s.
                                pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                                type: string
                              url:
                                description: |-
                                  URL is a reference to an OCI artifact repository hosted
                                  on a remote container registry.
                                pattern: ^oci://.*$
                                type: string
                              verify:
                                description: |-
                                  Verify contains the secret name containing the trusted public keys
                                  used to verify the signature and specifies which provider to use to check
                                  whether OCI image is authentic.
                                properties:
                                  matchOIDCIdentity:
                                    description: |-
                                      MatchOIDCIdentity specifies the identity matching criteria to use
                                      while verifying an OCI artifact which was signed using Cosign keyless
                                      signing. The artifact's identity is deemed to be verified if any of the
                                      specified matchers match against the identity.
                                    items:
                                      description: |-
                                        OIDCIdentityMatch specifies options for verifying the certificate identity,
                                        i.e. the issuer and the subject of the certificate.
                                      properties:
                                        issuer:
                                          description: |-
                                            Issuer specifies the regex pattern to match against to verify
                                            the OIDC issuer in the Fulcio certificate. The pattern must be a
                                            valid Go regular expression.
                                          type: string
                                        subject:
                                          description: |-
                                            Subject specifies the regex pattern to match against to verify
                                            the identity subject in the Fulcio certificate. The pattern must
                                            be a valid Go regular expression.
                                          type: string
                                      required:
                                      - issuer
                                      - subject
                                      type: object
                                    type: array
                                  provider:
                                    default: cosign
                                    description: Provider specifies the technology
                                      used to sign the OCI Artifact.
                                    enum:
                                    - cosign
                                    - notation
                                    type: string
                                  secretRef:
                                    description: |-
                                      SecretRef specifies the Kubernetes Secret containing the
                                      trusted public keys.
                                    properties:
                                      name:
                                        description: Name of the referent.
                                        type: string
                                    required:
                                    - name
                                    type: object
                                required:
                                - provider
                                type: object
                            required:
                            - interval
                            - url
                            type: object
                        type: object
                        x-kubernetes-validations:
                        - message: Git, Bucket and OCI are mutually exclusive.
                          rule: 'has(self.git) ? (!has(self.bucket) && !has(self.oci))
                            : true'
                        - message: Git, Bucket and OCI are mutually exclusive.
                          rule: 'has(self.bucket) ? (!has(self.git) && !has(self.oci))
                            : true'
                        - message: Git, Bucket and OCI are mutually exclusive.
                          rule: 'has(self.oci) ? (!has(self.git) && !has(self.bucket))
                            : true'
                        - message: One of Git, Bucket or OCI must be specified.
                          rule: has(self.git) || has(self.bucket) || has(self.oci)
                    required:
                    - deploymentType
                    - path
                    type: object
                    x-kubernetes-validations:
                    - message: Secret and ConfigMap are not supported as Helm chart
                        sources
                      rule: 'has(self.localSourceRef) ? (self.localSourceRef.kind
                        != ''Secret'' && self.localSourceRef.kind != ''ConfigMap''):
                        true'
                    - message: LocalSource and RemoteSource are mutually exclusive.
                      rule: 'has(self.localSourceRef) ? !has(self.remoteSourceSpec):
                        true'
                    - message: LocalSource and RemoteSource are mutually exclusive.
                      rule: 'has(self.remoteSourceSpec) ? !has(self.localSourceRef):
                        true'
                    - message: One of LocalSource or RemoteSource must be specified.
                      rule: has(self.localSourceRef) || has(self.remoteSourceSpec)
                  chartSpec:
                    description: ChartSpec defines the desired state of the HelmChart
                      to be created by the controller
                    properties:
                      chart:
                        description: |-
                          Chart is the name or path the Helm chart is available at in the
                          SourceRef.
                        type: string
                      ignoreMissingValuesFiles:
                        description: |-
                          IgnoreMissingValuesFiles controls whether to silently ignore missing values
                          files rather than failing.
                        type: boolean
                      interval:
                        description: |-
                          Interval at which the HelmChart SourceRef is checked for updates.
                          This interval is approximate and may be subject to jitter to ensure
                          efficient use of resources.
                        pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                        type: string
                      reconcileStrategy:
                        default: ChartVersion
                        description: |-
                          ReconcileStrategy determines what enables the creation of a new artifact.
                          Valid values are ('ChartVersion', 'Revision').
                          See the documentation of the values for an explanation on their behavior.
                          Defaults to ChartVersion when omitted.
                        enum:
                        - ChartVersion
                        - Revision
                        type: string
                      sourceRef:
                        description: SourceRef is the reference to the Source the
                          chart is available at.
                        properties:
                          apiVersion:
                            description: APIVersion of the referent.
                            type: string
                          kind:
                            description: |-
                              Kind of the referent, valid values are ('HelmRepository', 'GitRepository',
                              'Bucket').
                            enum:
                            - HelmRepository
                            - GitRepository
                            - Bucket
                            type: string
                          name:
                            description: Name of the referent.
                            type: string
                        required:
                        - kind
                        - name
                        type: object
                      suspend:
                        description: |-
                          Suspend tells the controller to suspend the reconciliation of this
                          source.
                        type: boolean
                      valuesFiles:
                        description: |-
                          ValuesFiles is an alternative list of values files to use as the chart
                          values (values.yaml is not included by default), expected to be a
                          relative path in the SourceRef.
                          Values files are merged in the order of this list with the last file
                          overriding the first. Ignored when omitted.
                        items:
                          type: string
                        type: array
                      verify:
                        description: |-
                          Verify contains the secret name containing the trusted public keys
                          used to verify the signature and specifies which provider to use to check
                          whether OCI image is authentic.
                          This field is only supported when using HelmRepository source with spec.type 'oci'.
                          Chart dependencies, which are not bundled in the umbrella chart artifact, are not verified.
                        properties:
                          matchOIDCIdentity:
                            description: |-
                              MatchOIDCIdentity specifies the identity matching criteria to use
                              while verifying an OCI artifact which was signed using Cosign keyless
                              signing. The artifact's identity is deemed to be verified if any of the
                              specified matchers match against the identity.
                            items:
                              description: |-
                                OIDCIdentityMatch specifies options for verifying the certificate identity,
                                i.e. the issuer and the subject of the certificate.
                              properties:
                                issuer:
                                  description: |-
                                    Issuer specifies the regex pattern to match against to verify
                                    the OIDC issuer in the Fulcio certificate. The pattern must be a
                                    valid Go regular expression.
                                  type: string
                                subject:
                                  description: |-
                                    Subject specifies the regex pattern to match against to verify
                                    the identity subject in the Fulcio certificate. The pattern must
                                    be a valid Go regular expression.
                                  type: string
                              required:
                              - issuer
                              - subject
                              type: object
                            type: array
                          provider:
                            default: cosign
                            description: Provider specifies the technology used to
                              sign the OCI Artifact.
                            enum:
                            - cosign
                            - notation
                            type: string
                          secretRef:
                            description: |-
                              SecretRef specifies the Kubernetes Secret containing the
                              trusted public keys.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - provider
                        type: object
                      version:
                        default: '*'
                        description: |-
                          Version is the chart version semver expression, ignored for charts from
                          GitRepository and Bucket sources. Defaults to latest when omitted.
                        type: string
                    required:
                    - chart
                    - interval
                    - sourceRef
                    type: object
                type: object
                x-kubernetes-validations:
                - message: chartSpec, chartSource and chartRef are mutually exclusive
                  rule: '(has(self.chartSpec) ? (!has(self.chartSource) && !has(self.chartRef)):
                    true)'
                - message: chartSpec, chartSource and chartRef are mutually exclusive
                  rule: '(has(self.chartSource) ? (!has(self.chartSpec) && !has(self.chartRef)):
                    true)'
                - message: chartSpec, chartSource and chartRef are mutually exclusive
                  rule: '(has(self.chartRef) ? (!has(self.chartSpec) && !has(self.chartSource)):
                    true)'
                - message: one of chartSpec, chartRef or chartSource must be set
                  rule: has(self.chartSpec) || has(self.chartRef) || has(self.chartSource)
              k8sConstraint:
                description: Constraint describing compatible K8S versions of the
                  cluster set in the SemVer format.
                type: string
              kustomize:
                description: Kustomize contains the Kustomize configuration for the
                  template.
                properties:
                  deploymentType:
                    default: Remote
                    description: |-
                      DeploymentType is the type of the deployment. This field is ignored,
                      when ResourceSpec is used as part of Helm chart configuration.
                    enum:
                    - Local
                    - Remote
                    type: string
                  localSourceRef:
                    description: LocalSourceRef is the local source of the kustomize
                      manifest.
                    properties:
                      kind:
                        description: Kind is the kind of the local source.
                        enum:
                        - ConfigMap
                        - Secret
                        - GitRepository
                        - Bucket
                        - OCIRepository
                        type: string
                      name:
                        description: Name is the name of the local source.
                        type: string
                      namespace:
                        description: |-
                          Namespace is the namespace of the local source. Cross-namespace references
                          are only allowed when the Kind is one of [github.com/fluxcd/source-controller/api/v1.GitRepository],
                          [github.com/fluxcd/source-controller/api/v1.Bucket] or [github.com/fluxcd/source-controller/api/v1.OCIRepository].
                          If the Kind is ConfigMap or Secret, the namespace will be ignored.
                        type: string
                    required:
                    - kind
                    - name
                    type: object
                  path:
                    description: Path to the directory containing the resource manifest.
                    type: string
                  remoteSourceSpec:
                    description: RemoteSourceSpec is the remote source of the kustomize
                      manifest.
                    properties:
                      bucket:
                        description: Bucket is the definition of bucket source.
                        properties:
                          bucketName:
                            description: BucketName is the name of the object storage
                              bucket.
                            type: string
                          certSecretRef:
                            description: |-
                              CertSecretRef can be given the name of a Secret containing
                              either or both of

                              - a PEM-encoded client certificate (`tls.crt`) and private
                              key (`tls.key`);
                              - a PEM-encoded CA certificate (`ca.crt`)

                              and whichever are supplied, will be used for connecting to the
                              bucket. The client cert and key are useful if you are
                              authenticating with a certificate; the CA cert is useful if
                              you are using a self-signed server certificate. The Secret must
                              be of type `Opaque` or `kubernetes.io/tls`.

                              This field is only supported for the `generic` provider.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          endpoint:
                            description: Endpoint is the object storage address the
                              BucketName is located at.
                            type: string
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          insecure:
                            description: Insecure allows connecting to a non-TLS HTTP
                              Endpoint.
                            type: boolean
                          interval:
                            description: |-
                              Interval at which the Bucket Endpoint is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          prefix:
                            description: Prefix to use for server-side filtering of
                              files in the Bucket.
                            type: string
                          provider:
                            default: generic
                            description: |-
                              Provider of the object storage bucket.
                              Defaults to 'generic', which expects an S3 (API) compatible object
                              storage.
                            enum:
                            - generic
                            - aws
                            - gcp
                            - azure
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the Bucket server.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          region:
                            description: Region of the Endpoint where the BucketName
                              is located in.
                            type: string
                          secretRef:
                            description: |-
                              SecretRef specifies the Secret containing authentication credentials
                              for the Bucket.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          sts:
                            description: |-
                              STS specifies the required configuration to use a Security Token
                              Service for fetching temporary credentials to authenticate in a
                              Bucket provider.

                              This field is only supported for the `aws` and `generic` providers.
                            properties:
                              certSecretRef:
                                description: |-
                                  CertSecretRef can be given the name of a Secret containing
                                  either or both of

                                  - a PEM-encoded client certificate (`tls.crt`) and private
                                  key (`tls.key`);
                                  - a PEM-encoded CA certificate (`ca.crt`)

                                  and whichever are supplied, will be used for connecting to the
                                  STS endpoint. The client cert and key are useful if you are
                                  authenticating with a certificate; the CA cert is useful if
                                  you are using a self-signed server certificate. The Secret must
                                  be of type `Opaque` or `kubernetes.io/tls`.

                                  This field is only supported for the `ldap` provider.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              endpoint:
                                description: |-
                                  Endpoint is the HTTP/S endpoint of the Security Token Service from
                                  where temporary credentials will be fetched.
                                pattern: ^(http|https)://.*$
                                type: string
                              provider:
                                description: Provider of the Security Token Service.
                                enum:
                                - aws
                                - ldap
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing authentication credentials
                                  for the STS endpoint. This Secret must contain the fields `username`
                                  and `password` and is supported only for the `ldap` provider.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - endpoint
                            - provider
                            type: object
                          suspend:
                            description: |-
                              Suspend tells the controller to suspend the reconciliation of this
                              Bucket.
                            type: boolean
                          timeout:
                            default: 60s
                            description: Timeout for fetch operations, defaults to
                              60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                        required:
                        - bucketName
                        - endpoint
                        - interval
                        type: object
                        x-kubernetes-validations:
                        - message: STS configuration is only supported for the 'aws'
                            and 'generic' Bucket providers
                          rule: self.provider == 'aws' || self.provider == 'generic'
                            || !has(self.sts)
                        - message: '''aws'' is the only supported STS provider for
                            the ''aws'' Bucket provider'
                          rule: self.provider != 'aws' || !has(self.sts) || self.sts.provider
                            == 'aws'
                        - message: '''ldap'' is the only supported STS provider for
                            the ''generic'' Bucket provider'
                          rule: self.provider != 'generic' || !has(self.sts) || self.sts.provider
                            == 'ldap'
                        - message: spec.sts.secretRef is not required for the 'aws'
                            STS provider
                          rule: '!has(self.sts) || self.sts.provider != ''aws'' ||
                            !has(self.sts.secretRef)'
                        - message: spec.sts.certSecretRef is not required for the
                            'aws' STS provider
                          rule: '!has(self.sts) || self.sts.provider != ''aws'' ||
                            !has(self.sts.certSecretRef)'
                      git:
                        description: Git is the definition of git repository source.
                        properties:
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          include:
                            description: |-
                              Include specifies a list of GitRepository resources which Artifacts
                              should be included in the Artifact produced for this GitRepository.
                            items:
                              description: |-
                                GitRepositoryInclude specifies a local reference to a GitRepository which
                                Artifact (sub-)contents must be included, and where they should be placed.
                              properties:
                                fromPath:
                                  description: |-
                                    FromPath specifies the path to copy contents from, defaults to the root
                                    of the Artifact.
                                  type: string
                                repository:
                                  description: |-
                                    GitRepositoryRef specifies the GitRepository which Artifact contents
                                    must be included.
                                  properties:
                                    name:
                                      description: Name of the referent.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                toPath:
                                  description: |-
                                    ToPath specifies the path to copy contents to, defaults to the name of
                                    the GitRepositoryRef.
                                  type: string
                              required:
                              - repository
                              type: object
                            type: array
                          interval:
                            description: |-
                              Interval at which the GitRepository URL is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          provider:
                            description: |-
                              Provider used for authentication, can be 'azure', 'github', 'generic'.
                              When not specified, defaults to 'generic'.
                            enum:
                            - generic
                            - azure
                            - github
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the Git server.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          recurseSubmodules:
                            description: |-
                              RecurseSubmodules enables the initialization of all submodules within
                              the GitRepository as cloned from the URL, using their default settings.
                            type: boolean
                          ref:
                            description: |-
                              Reference specifies the Git reference to resolve and monitor for
                              changes, defaults to the 'master' branch.
                            properties:
                              branch:
                                description: Branch to check out, defaults to 'master'
                                  if no other field is defined.
                                type: string
                              commit:
                                description: |-
                                  Commit SHA to check out, takes precedence over all reference fields.

                                  This can be combined with Branch to shallow clone the branch, in which
                                  the commit is expected to exist.
                                type: string
                              name:
                                description: |-
                                  Name of the reference to check out; takes precedence over Branch, Tag and SemVer.

                                  It must be a valid Git reference: https://git-scm.com/docs/git-check-ref-format#_description
                                  Examples: "refs/heads/main", "refs/tags/v0.1.0", "refs/pull/420/head", "refs/merge-requests/1/head"
                                type: string
                              semver:
                                description: SemVer tag expression to check out, takes
                                  precedence over Tag.
                                type: string
                              tag:
                                description: Tag to check out, takes precedence over
                                  Branch.
                                type: string
                            type: object
                          secretRef:
                            description: |-
                              SecretRef specifies the Secret containing authentication credentials for
                              the GitRepository.
                              For HTTPS repositories the Secret must contain 'username' and 'password'
                              fields for basic auth or 'bearerToken' field for token auth.
                              For SSH repositories the Secret must contain 'identity'
                              and 'known_hosts' fields.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          sparseCheckout:
                            description: |-
                              SparseCheckout specifies a list of directories to checkout when cloning
                              the repository. If specified, only these directories are included in the
                              Artifact produced for this GitRepository.
                            items:
                              type: string
                            type: array
                          suspend:
                            description: |-
                              Suspend tells the controller to suspend the reconciliation of this
                              GitRepository.
                            type: boolean
                          timeout:
                            default: 60s
                            description: Timeout for Git operations like cloning,
                              defaults to 60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                          url:
                            description: URL specifies the Git repository URL, it
                              can be an HTTP/S or SSH address.
                            pattern: ^(http|https|ssh)://.*$
                            type: string
                          verify:
                            description: |-
                              Verification specifies the configuration to verify the Git commit
                              signature(s).
                            properties:
                              mode:
                                default: HEAD
                                description: |-
                                  Mode specifies which Git object(s) should be verified.

                                  The variants "head" and "HEAD" both imply the same thing, i.e. verify
                                  the commit that the HEAD of the Git repository points to. The variant
                                  "head" solely exists to ensure backwards compatibility.
                                enum:
                                - head
                                - HEAD
                                - Tag
                                - TagAndHEAD
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing the public keys of trusted Git
                                  authors.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - secretRef
                            type: object
                        required:
                        - interval
                        - url
                        type: object
                      oci:
                        description: OCI is the definition of OCI repository source.
                        properties:
                          certSecretRef:
                            description: |-
                              CertSecretRef can be given the name of a Secret containing
                              either or both of

                              - a PEM-encoded client certificate (`tls.crt`) and private
                              key (`tls.key`);
                              - a PEM-encoded CA certificate (`ca.crt`)

                              and whichever are supplied, will be used for connecting to the
                              registry. The client cert and key are useful if you are
                              authenticating with a certificate; the CA cert is useful if
                              you are using a self-signed server certificate. The Secret must
                              be of type `Opaque` or `kubernetes.io/tls`.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          insecure:
                            description: Insecure allows connecting to a non-TLS HTTP
                              container registry.
                            type: boolean
                          interval:
                            description: |-
                              Interval at which the OCIRepository URL is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          layerSelector:
                            description: |-
                              LayerSelector specifies which layer should be extracted from the OCI artifact.
                              When not specified, the first layer found in the artifact is selected.
                            properties:
                              mediaType:
                                description: |-
                                  MediaType specifies the OCI media type of the layer
                                  which should be extracted from the OCI Artifact. The
                                  first layer matching this type is selected.
                                type: string
                              operation:
                                description: |-
                                  Operation specifies how the selected layer should be processed.
                                  By default, the layer compressed content is extracted to storage.
                                  When the operation is set to 'copy', the layer compressed content
                                  is persisted to storage as it is.
                                enum:
                                - extract
                                - copy
                                type: string
                            type: object
                          provider:
                            default: generic
                            description: |-
                              The provider used for authentication, can be 'aws', 'azure', 'gcp' or 'generic'.
                              When not specified, defaults to 'generic'.
                            enum:
                            - generic
                            - aws
                            - azure
                            - gcp
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the container registry.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          ref:
                            description: |-
                              The OCI reference to pull and monitor for changes,
                              defaults to the latest tag.
                            properties:
                              digest:
                                description: |-
                                  Digest is the image digest to pull, takes precedence over SemVer.
                                  The value should be in the format 'sha256:<HASH>'.
                                type: string
                              semver:
                                description: |-
                                  SemVer is the range of tags to pull selecting the latest within
                                  the range, takes precedence over Tag.
                                type: string
                              semverFilter:
                                description: SemverFilter is a regex pattern to filter
                                  the tags within the SemVer range.
                                type: string
                              tag:
                                description: Tag is the image tag to pull, defaults
                                  to latest.
                                type: string
                            type: object
                          secretRef:
                            description: |-
                              SecretRef contains the secret name containing the registry login
                              credentials to resolve image metadata.
                              The secret must be of type kubernetes.io/dockerconfigjson.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          serviceAccountName:
                            description: |-
                              ServiceAccountName is the name of the Kubernetes ServiceAccount used to authenticate
                              the image pull if the service account has attached pull secrets. For more information:
                              https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#add-imagepullsecrets-to-a-service-account
                            type: string
                          suspend:
                            description: This flag tells the controller to suspend
                              the reconciliation of this source.
                            type: boolean
                          timeout:
                            default: 60s
                            description: The timeout for remote OCI Repository operations
                              like pulling, defaults to 60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                          url:
                            description: |-
                              URL is a reference to an OCI artifact repository hosted
                              on a remote container registry.
                            pattern: ^oci://.*$
                            type: string
                          verify:
                            description: |-
                              Verify contains the secret name containing the trusted public keys
                              used to verify the signature and specifies which provider to use to check
                              whether OCI image is authentic.
                            properties:
                              matchOIDCIdentity:
                                description: |-
                                  MatchOIDCIdentity specifies the identity matching criteria to use
                                  while verifying an OCI artifact which was signed using Cosign keyless
                                  signing. The artifact's identity is deemed to be verified if any of the
                                  specified matchers match against the identity.
                                items:
                                  description: |-
                                    OIDCIdentityMatch specifies options for verifying the certificate identity,
                                    i.e. the issuer and the subject of the certificate.
                                  properties:
                                    issuer:
                                      description: |-
                                        Issuer specifies the regex pattern to match against to verify
                                        the OIDC issuer in the Fulcio certificate. The pattern must be a
                                        valid Go regular expression.
                                      type: string
                                    subject:
                                      description: |-
                                        Subject specifies the regex pattern to match against to verify
                                        the identity subject in the Fulcio certificate. The pattern must
                                        be a valid Go regular expression.
                                      type: string
                                  required:
                                  - issuer
                                  - subject
                                  type: object
                                type: array
                              provider:
                                default: cosign
                                description: Provider specifies the technology used
                                  to sign the OCI Artifact.
                                enum:
                                - cosign
                                - notation
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Kubernetes Secret containing the
                                  trusted public keys.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - provider
                            type: object
                        required:
                        - interval
                        - url
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.git) ? (!has(self.bucket) && !has(self.oci))
                        : true'
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.bucket) ? (!has(self.git) && !has(self.oci))
                        : true'
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.oci) ? (!has(self.git) && !has(self.bucket))
                        : true'
                    - message: One of Git, Bucket or OCI must be specified.
                      rule: has(self.git) || has(self.bucket) || has(self.oci)
                required:
                - deploymentType
                - path
                type: object
                x-kubernetes-validations:
                - message: LocalSource and RemoteSource are mutually exclusive.
                  rule: 'has(self.localSourceRef) ? !has(self.remoteSourceSpec): true'
                - message: LocalSource and RemoteSource are mutually exclusive.
                  rule: 'has(self.remoteSourceSpec) ? !has(self.localSourceRef): true'
                - message: One of LocalSource or RemoteSource must be specified.
                  rule: has(self.localSourceRef) || has(self.remoteSourceSpec)
              resources:
                description: Resources contains the resource configuration for the
                  template.
                properties:
                  deploymentType:
                    default: Remote
                    description: |-
                      DeploymentType is the type of the deployment. This field is ignored,
                      when ResourceSpec is used as part of Helm chart configuration.
                    enum:
                    - Local
                    - Remote
                    type: string
                  localSourceRef:
                    description: LocalSourceRef is the local source of the kustomize
                      manifest.
                    properties:
                      kind:
                        description: Kind is the kind of the local source.
                        enum:
                        - ConfigMap
                        - Secret
                        - GitRepository
                        - Bucket
                        - OCIRepository
                        type: string
                      name:
                        description: Name is the name of the local source.
                        type: string
                      namespace:
                        description: |-
                          Namespace is the namespace of the local source. Cross-namespace references
                          are only allowed when the Kind is one of [github.com/fluxcd/source-controller/api/v1.GitRepository],
                          [github.com/fluxcd/source-controller/api/v1.Bucket] or [github.com/fluxcd/source-controller/api/v1.OCIRepository].
                          If the Kind is ConfigMap or Secret, the namespace will be ignored.
                        type: string
                    required:
                    - kind
                    - name
                    type: object
                  path:
                    description: Path to the directory containing the resource manifest.
                    type: string
                  remoteSourceSpec:
                    description: RemoteSourceSpec is the remote source of the kustomize
                      manifest.
                    properties:
                      bucket:
                        description: Bucket is the definition of bucket source.
                        properties:
                          bucketName:
                            description: BucketName is the name of the object storage
                              bucket.
                            type: string
                          certSecretRef:
                            description: |-
                              CertSecretRef can be given the name of a Secret containing
                              either or both of

                              - a PEM-encoded client certificate (`tls.crt`) and private
                              key (`tls.key`);
                              - a PEM-encoded CA certificate (`ca.crt`)

                              and whichever are supplied, will be used for connecting to the
                              bucket. The client cert and key are useful if you are
                              authenticating with a certificate; the CA cert is useful if
                              you are using a self-signed server certificate. The Secret must
                              be of type `Opaque` or `kubernetes.io/tls`.

                              This field is only supported for the `generic` provider.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          endpoint:
                            description: Endpoint is the object storage address the
                              BucketName is located at.
                            type: string
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          insecure:
                            description: Insecure allows connecting to a non-TLS HTTP
                              Endpoint.
                            type: boolean
                          interval:
                            description: |-
                              Interval at which the Bucket Endpoint is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          prefix:
                            description: Prefix to use for server-side filtering of
                              files in the Bucket.
                            type: string
                          provider:
                            default: generic
                            description: |-
                              Provider of the object storage bucket.
                              Defaults to 'generic', which expects an S3 (API) compatible object
                              storage.
                            enum:
                            - generic
                            - aws
                            - gcp
                            - azure
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the Bucket server.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          region:
                            description: Region of the Endpoint where the BucketName
                              is located in.
                            type: string
                          secretRef:
                            description: |-
                              SecretRef specifies the Secret containing authentication credentials
                              for the Bucket.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          sts:
                            description: |-
                              STS specifies the required configuration to use a Security Token
                              Service for fetching temporary credentials to authenticate in a
                              Bucket provider.

                              This field is only supported for the `aws` and `generic` providers.
                            properties:
                              certSecretRef:
                                description: |-
                                  CertSecretRef can be given the name of a Secret containing
                                  either or both of

                                  - a PEM-encoded client certificate (`tls.crt`) and private
                                  key (`tls.key`);
                                  - a PEM-encoded CA certificate (`ca.crt`)

                                  and whichever are supplied, will be used for connecting to the
                                  STS endpoint. The client cert and key are useful if you are
                                  authenticating with a certificate; the CA cert is useful if
                                  you are using a self-signed server certificate. The Secret must
                                  be of type `Opaque` or `kubernetes.io/tls`.

                                  This field is only supported for the `ldap` provider.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                              endpoint:
                                description: |-
                                  Endpoint is the HTTP/S endpoint of the Security Token Service from
                                  where temporary credentials will be fetched.
                                pattern: ^(http|https)://.*$
                                type: string
                              provider:
                                description: Provider of the Security Token Service.
                                enum:
                                - aws
                                - ldap
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing authentication credentials
                                  for the STS endpoint. This Secret must contain the fields `username`
                                  and `password` and is supported only for the `ldap` provider.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - endpoint
                            - provider
                            type: object
                          suspend:
                            description: |-
                              Suspend tells the controller to suspend the reconciliation of this
                              Bucket.
                            type: boolean
                          timeout:
                            default: 60s
                            description: Timeout for fetch operations, defaults to
                              60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                        required:
                        - bucketName
                        - endpoint
                        - interval
                        type: object
                        x-kubernetes-validations:
                        - message: STS configuration is only supported for the 'aws'
                            and 'generic' Bucket providers
                          rule: self.provider == 'aws' || self.provider == 'generic'
                            || !has(self.sts)
                        - message: '''aws'' is the only supported STS provider for
                            the ''aws'' Bucket provider'
                          rule: self.provider != 'aws' || !has(self.sts) || self.sts.provider
                            == 'aws'
                        - message: '''ldap'' is the only supported STS provider for
                            the ''generic'' Bucket provider'
                          rule: self.provider != 'generic' || !has(self.sts) || self.sts.provider
                            == 'ldap'
                        - message: spec.sts.secretRef is not required for the 'aws'
                            STS provider
                          rule: '!has(self.sts) || self.sts.provider != ''aws'' ||
                            !has(self.sts.secretRef)'
                        - message: spec.sts.certSecretRef is not required for the
                            'aws' STS provider
                          rule: '!has(self.sts) || self.sts.provider != ''aws'' ||
                            !has(self.sts.certSecretRef)'
                      git:
                        description: Git is the definition of git repository source.
                        properties:
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          include:
                            description: |-
                              Include specifies a list of GitRepository resources which Artifacts
                              should be included in the Artifact produced for this GitRepository.
                            items:
                              description: |-
                                GitRepositoryInclude specifies a local reference to a GitRepository which
                                Artifact (sub-)contents must be included, and where they should be placed.
                              properties:
                                fromPath:
                                  description: |-
                                    FromPath specifies the path to copy contents from, defaults to the root
                                    of the Artifact.
                                  type: string
                                repository:
                                  description: |-
                                    GitRepositoryRef specifies the GitRepository which Artifact contents
                                    must be included.
                                  properties:
                                    name:
                                      description: Name of the referent.
                                      type: string
                                  required:
                                  - name
                                  type: object
                                toPath:
                                  description: |-
                                    ToPath specifies the path to copy contents to, defaults to the name of
                                    the GitRepositoryRef.
                                  type: string
                              required:
                              - repository
                              type: object
                            type: array
                          interval:
                            description: |-
                              Interval at which the GitRepository URL is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          provider:
                            description: |-
                              Provider used for authentication, can be 'azure', 'github', 'generic'.
                              When not specified, defaults to 'generic'.
                            enum:
                            - generic
                            - azure
                            - github
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the Git server.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          recurseSubmodules:
                            description: |-
                              RecurseSubmodules enables the initialization of all submodules within
                              the GitRepository as cloned from the URL, using their default settings.
                            type: boolean
                          ref:
                            description: |-
                              Reference specifies the Git reference to resolve and monitor for
                              changes, defaults to the 'master' branch.
                            properties:
                              branch:
                                description: Branch to check out, defaults to 'master'
                                  if no other field is defined.
                                type: string
                              commit:
                                description: |-
                                  Commit SHA to check out, takes precedence over all reference fields.

                                  This can be combined with Branch to shallow clone the branch, in which
                                  the commit is expected to exist.
                                type: string
                              name:
                                description: |-
                                  Name of the reference to check out; takes precedence over Branch, Tag and SemVer.

                                  It must be a valid Git reference: https://git-scm.com/docs/git-check-ref-format#_description
                                  Examples: "refs/heads/main", "refs/tags/v0.1.0", "refs/pull/420/head", "refs/merge-requests/1/head"
                                type: string
                              semver:
                                description: SemVer tag expression to check out, takes
                                  precedence over Tag.
                                type: string
                              tag:
                                description: Tag to check out, takes precedence over
                                  Branch.
                                type: string
                            type: object
                          secretRef:
                            description: |-
                              SecretRef specifies the Secret containing authentication credentials for
                              the GitRepository.
                              For HTTPS repositories the Secret must contain 'username' and 'password'
                              fields for basic auth or 'bearerToken' field for token auth.
                              For SSH repositories the Secret must contain 'identity'
                              and 'known_hosts' fields.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          sparseCheckout:
                            description: |-
                              SparseCheckout specifies a list of directories to checkout when cloning
                              the repository. If specified, only these directories are included in the
                              Artifact produced for this GitRepository.
                            items:
                              type: string
                            type: array
                          suspend:
                            description: |-
                              Suspend tells the controller to suspend the reconciliation of this
                              GitRepository.
                            type: boolean
                          timeout:
                            default: 60s
                            description: Timeout for Git operations like cloning,
                              defaults to 60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                          url:
                            description: URL specifies the Git repository URL, it
                              can be an HTTP/S or SSH address.
                            pattern: ^(http|https|ssh)://.*$
                            type: string
                          verify:
                            description: |-
                              Verification specifies the configuration to verify the Git commit
                              signature(s).
                            properties:
                              mode:
                                default: HEAD
                                description: |-
                                  Mode specifies which Git object(s) should be verified.

                                  The variants "head" and "HEAD" both imply the same thing, i.e. verify
                                  the commit that the HEAD of the Git repository points to. The variant
                                  "head" solely exists to ensure backwards compatibility.
                                enum:
                                - head
                                - HEAD
                                - Tag
                                - TagAndHEAD
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Secret containing the public keys of trusted Git
                                  authors.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - secretRef
                            type: object
                        required:
                        - interval
                        - url
                        type: object
                      oci:
                        description: OCI is the definition of OCI repository source.
                        properties:
                          certSecretRef:
                            description: |-
                              CertSecretRef can be given the name of a Secret containing
                              either or both of

                              - a PEM-encoded client certificate (`tls.crt`) and private
                              key (`tls.key`);
                              - a PEM-encoded CA certificate (`ca.crt`)

                              and whichever are supplied, will be used for connecting to the
                              registry. The client cert and key are useful if you are
                              authenticating with a certificate; the CA cert is useful if
                              you are using a self-signed server certificate. The Secret must
                              be of type `Opaque` or `kubernetes.io/tls`.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          ignore:
                            description: |-
                              Ignore overrides the set of excluded patterns in the .sourceignore format
                              (which is the same as .gitignore). If not provided, a default will be used,
                              consult the documentation for your version to find out what those are.
                            type: string
                          insecure:
                            description: Insecure allows connecting to a non-TLS HTTP
                              container registry.
                            type: boolean
                          interval:
                            description: |-
                              Interval at which the OCIRepository URL is checked for updates.
                              This interval is approximate and may be subject to jitter to ensure
                              efficient use of resources.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m|h))+$
                            type: string
                          layerSelector:
                            description: |-
                              LayerSelector specifies which layer should be extracted from the OCI artifact.
                              When not specified, the first layer found in the artifact is selected.
                            properties:
                              mediaType:
                                description: |-
                                  MediaType specifies the OCI media type of the layer
                                  which should be extracted from the OCI Artifact. The
                                  first layer matching this type is selected.
                                type: string
                              operation:
                                description: |-
                                  Operation specifies how the selected layer should be processed.
                                  By default, the layer compressed content is extracted to storage.
                                  When the operation is set to 'copy', the layer compressed content
                                  is persisted to storage as it is.
                                enum:
                                - extract
                                - copy
                                type: string
                            type: object
                          provider:
                            default: generic
                            description: |-
                              The provider used for authentication, can be 'aws', 'azure', 'gcp' or 'generic'.
                              When not specified, defaults to 'generic'.
                            enum:
                            - generic
                            - aws
                            - azure
                            - gcp
                            type: string
                          proxySecretRef:
                            description: |-
                              ProxySecretRef specifies the Secret containing the proxy configuration
                              to use while communicating with the container registry.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          ref:
                            description: |-
                              The OCI reference to pull and monitor for changes,
                              defaults to the latest tag.
                            properties:
                              digest:
                                description: |-
                                  Digest is the image digest to pull, takes precedence over SemVer.
                                  The value should be in the format 'sha256:<HASH>'.
                                type: string
                              semver:
                                description: |-
                                  SemVer is the range of tags to pull selecting the latest within
                                  the range, takes precedence over Tag.
                                type: string
                              semverFilter:
                                description: SemverFilter is a regex pattern to filter
                                  the tags within the SemVer range.
                                type: string
                              tag:
                                description: Tag is the image tag to pull, defaults
                                  to latest.
                                type: string
                            type: object
                          secretRef:
                            description: |-
                              SecretRef contains the secret name containing the registry login
                              credentials to resolve image metadata.
                              The secret must be of type kubernetes.io/dockerconfigjson.
                            properties:
                              name:
                                description: Name of the referent.
                                type: string
                            required:
                            - name
                            type: object
                          serviceAccountName:
                            description: |-
                              ServiceAccountName is the name of the Kubernetes ServiceAccount used to authenticate
                              the image pull if the service account has attached pull secrets. For more information:
                              https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#add-imagepullsecrets-to-a-service-account
                            type: string
                          suspend:
                            description: This flag tells the controller to suspend
                              the reconciliation of this source.
                            type: boolean
                          timeout:
                            default: 60s
                            description: The timeout for remote OCI Repository operations
                              like pulling, defaults to 60s.
                            pattern: ^([0-9]+(\.[0-9]+)?(ms|s|m))+$
                            type: string
                          url:
                            description: |-
                              URL is a reference to an OCI artifact repository hosted
                              on a remote container registry.
                            pattern: ^oci://.*$
                            type: string
                          verify:
                            description: |-
                              Verify contains the secret name containing the trusted public keys
                              used to verify the signature and specifies which provider to use to check
                              whether OCI image is authentic.
                            properties:
                              matchOIDCIdentity:
                                description: |-
                                  MatchOIDCIdentity specifies the identity matching criteria to use
                                  while verifying an OCI artifact which was signed using Cosign keyless
                                  signing. The artifact's identity is deemed to be verified if any of the
                                  specified matchers match against the identity.
                                items:
                                  description: |-
                                    OIDCIdentityMatch specifies options for verifying the certificate identity,
                                    i.e. the issuer and the subject of the certificate.
                                  properties:
                                    issuer:
                                      description: |-
                                        Issuer specifies the regex pattern to match against to verify
                                        the OIDC issuer in the Fulcio certificate. The pattern must be a
                                        valid Go regular expression.
                                      type: string
                                    subject:
                                      description: |-
                                        Subject specifies the regex pattern to match against to verify
                                        the identity subject in the Fulcio certificate. The pattern must
                                        be a valid Go regular expression.
                                      type: string
                                  required:
                                  - issuer
                                  - subject
                                  type: object
                                type: array
                              provider:
                                default: cosign
                                description: Provider specifies the technology used
                                  to sign the OCI Artifact.
                                enum:
                                - cosign
                                - notation
                                type: string
                              secretRef:
                                description: |-
                                  SecretRef specifies the Kubernetes Secret containing the
                                  trusted public keys.
                                properties:
                                  name:
                                    description: Name of the referent.
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - provider
                            type: object
                        required:
                        - interval
                        - url
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.git) ? (!has(self.bucket) && !has(self.oci))
                        : true'
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.bucket) ? (!has(self.git) && !has(self.oci))
                        : true'
                    - message: Git, Bucket and OCI are mutually exclusive.
                      rule: 'has(self.oci) ? (!has(self.git) && !has(self.bucket))
                        : true'
                    - message: One of Git, Bucket or OCI must be specified.
                      rule: has(self.git) || has(self.bucket) || has(self.oci)
                required:
                - deploymentType
                - path
                type: object
                x-kubernetes-validations:
                - message: LocalSource and RemoteSource are mutually exclusive.
                  rule: 'has(self.localSourceRef) ? !has(self.remoteSourceSpec): true'
                - message: LocalSource and RemoteSource are mutually exclusive.
                  rule: 'has(self.remoteSourceSpec) ? !has(self.localSourceRef): true'
                - message: One of LocalSource or RemoteSource must be specified.
                  rule: has(self.localSourceRef) || has(self.remoteSourceSpec)
              version:
                description: Version is the semantic version of the application backed
                  by template.
                type: string
            type: object
            x-kubernetes-validations:
            - message: Spec is immutable
              rule: self == oldSelf
            - message: Helm, Kustomize and Resources are mutually exclusive.
              rule: 'has(self.helm) ? (!has(self.kustomize) && !has(self.resources)):
                true'
            - message: Helm, Kustomize and Resources are mutually exclusive.
              rule: 'has(self.kustomize) ? (!has(self.helm) && !has(self.resources)):
                true'
            - message: Helm, Kustomize and Resources are mutually exclusive.
              rule: 'has(self.resources) ? (!has(self.kustomize) && !has(self.helm)):
                true'
            - message: One of Helm, Kustomize, or Resources must be specified.
              rule: has(self.helm) || has(self.kustomize) || has(self.resources)
          status:
            description: ServiceTemplateStatus defines the observed state of ServiceTemplate
            properties:
              chartRef:
                description: |-
                  ChartRef is a reference to a source controller resource containing the
                  Helm chart representing the template.
                properties:
                  apiVersion:
                    description: APIVersion of the referent.
                    type: string
                  kind:
                    description: Kind of the referent.
                    enum:
                    - OCIRepository
                    - HelmChart
                    type: string
                  name:
                    description: Name of the referent.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: |-
                      Namespace of the referent, defaults to the namespace of the Kubernetes
                      resource object that contains the reference.
                    maxLength: 63
                    minLength: 1
                    type: string
                required:
                - kind
                - name
                type: object
              chartVersion:
                description: ChartVersion represents the version of the Helm Chart
                  associated with this template.
                type: string
              config:
                description: |-
                  Config demonstrates available parameters for template customization,
                  that can be used when creating ClusterDeployment objects.
                x-kubernetes-preserve-unknown-fields: true
              description:
                description: Description contains information about the template.
                type: string
              k8sConstraint:
                description: Constraint describing compatible K8S versions of the
                  cluster set in the SemVer format.
                type: string
              observedGeneration:
                description: ObservedGeneration is the last observed generation.
                format: int64
                type: integer
              sourceStatus:
                description: SourceStatus reflects the status of the source.
                properties:
                  artifact:
                    description: Artifact is the artifact that was generated from
                      the template source.
                    properties:
                      digest:
                        description: Digest is the digest of the file in the form
                          of '<algorithm>:<checksum>'.
                        pattern: ^[a-z0-9]+(?:[.+_-][a-z0-9]+)*:[a-zA-Z0-9=_-]+$
                        type: string
                      lastUpdateTime:
                        description: |-
                          LastUpdateTime is the timestamp corresponding to the last update of the
                          Artifact.
                        format: date-time
                        type: string
                      metadata:
                        additionalProperties:
                          type: string
                        description: Metadata holds upstream information such as OCI
                          annotations.
                        type: object
                      path:
                        description: |-
                          Path is the relative file path of the Artifact. It can be used to locate
                          the file in the root of the Artifact storage on the local file system of
                          the controller managing the Source.
                        type: string
                      revision:
                        description: |-
                          Revision is a human-readable identifier traceable in the origin source
                          system. It can be a Git commit SHA, Git tag, a Helm chart version, etc.
                        type: string
                      size:
                        description: Size is the number of bytes in the file.
                        format: int64
                        type: integer
                      url:
                        description: |-
                          URL is the HTTP address of the Artifact as exposed by the controller
                          managing the Source. It can be used to retrieve the Artifact for
                          consumption, e.g. by another controller applying the Artifact contents.
                        type: string
                    required:
                    - lastUpdateTime
                    - path
                    - revision
                    - url
                    type: object
                  conditions:
                    description: Conditions reflects the conditions of the remote
                      source object.
                    items:
                      description: Condition contains details for one aspect of the
                        current state of this API Resource.
                      properties:
                        lastTransitionTime:
                          description: |-
                            lastTransitionTime is the last time the condition transitioned from one status to another.
                            This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                          format: date-time
                          type: string
                        message:
                          description: |-
                            message is a human readable message indicating details about the transition.
                            This may be an empty string.
                          maxLength: 32768
                          type: string
                        observedGeneration:
                          description: |-
                            observedGeneration represents the .metadata.generation that the condition was set based upon.
                            For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                            with respect to the current state of the instance.
                          format: int64
                          minimum: 0
                          type: integer
                        reason:
                          description: |-
                            reason contains a programmatic identifier indicating the reason for the condition's last transition.
                            Producers of specific condition types may define expected values and meanings for this field,
                            and whether the values are considered a guaranteed API.
                            The value should be a CamelCase string.
                            This field may not be empty.
                          maxLength: 1024
                          minLength: 1
                          pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                          type: string
                        status:
                          description: status of the condition, one of True, False,
                            Unknown.
                          enum:
                          - "True"
                          - "False"
                          - Unknown
                          type: string
                        type:
                          description: type of condition in CamelCase or in foo.example.com/CamelCase.
                          maxLength: 316
                          pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                          type: string
                      required:
                      - lastTransitionTime
                      - message
                      - reason
                      - status
                      - type
                      type: object
                    type: array
                    x-kubernetes-list-map-keys:
                    - type
                    x-kubernetes-list-type: map
                  kind:
                    description: Kind is the kind of the remote source.
                    type: string
                  name:
                    description: Name is the name of the remote source.
                    type: string
                  namespace:
                    description: Namespace is the namespace of the remote source.
                    type: string
                  observedGeneration:
                    description: ObservedGeneration is the latest source generation
                      observed by the controller.
                    format: int64
                    type: integer
                required:
                - kind
                - name
                - namespace
                type: object
              valid:
                description: Valid indicates whether the template passed validation
                  or not.
                type: boolean
              validationError:
                description: ValidationError provides information regarding issues
                  encountered during template validation.
                type: string
            required:
            - valid
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
